<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>D-Bus: dbus-sysdeps-util-win.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">D-Bus
   &#160;<span id="projectnumber">1.6.8</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">dbus-sysdeps-util-win.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* -*- mode: C; c-file-style: &quot;gnu&quot;; indent-tabs-mode: nil; -*- */</span>
<a name="l00002"></a>00002 <span class="comment">/* dbus-sysdeps-util.c Would be in dbus-sysdeps.c, but not used in libdbus</span>
<a name="l00003"></a>00003 <span class="comment"> * </span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2002, 2003, 2004, 2005  Red Hat, Inc.</span>
<a name="l00005"></a>00005 <span class="comment"> * Copyright (C) 2003 CodeFactory AB</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * Licensed under the Academic Free License version 2.1</span>
<a name="l00008"></a>00008 <span class="comment"> * </span>
<a name="l00009"></a>00009 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00010"></a>00010 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00011"></a>00011 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00012"></a>00012 <span class="comment"> * (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00017"></a>00017 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00020"></a>00020 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;config.h&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#define STRSAFE_NO_DEPRECATE</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;dbus-sysdeps.h&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;dbus-internals.h&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;dbus-protocol.h&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;dbus-string.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;dbus-sysdeps.h&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;dbus-sysdeps-win.h&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;dbus-sockets-win.h&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;dbus-memory.h&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;dbus-pipe.h&quot;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#if HAVE_ERRNO_H</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#endif</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#include &lt;winsock2.h&gt;</span>   <span class="comment">// WSA error codes</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef DBUS_WINCE</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">#include &lt;io.h&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;lm.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#endif</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 
<a name="l00062"></a>00062 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00063"></a><a class="code" href="group__DBusSysdeps.html#gaca61af8681a48862835ea8cfd263f5ab">00063</a> <a class="code" href="group__DBusInternalsUtils.html#gaca61af8681a48862835ea8cfd263f5ab" title="Does the chdir, fork, setsid, etc.">_dbus_become_daemon</a> (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *pidfile,
<a name="l00064"></a>00064                      <a class="code" href="structDBusPipe.html">DBusPipe</a>         *print_pid_pipe,
<a name="l00065"></a>00065                      <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error,
<a name="l00066"></a>00066                      <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>       keep_umask)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 
<a name="l00079"></a>00079 <span class="keyword">static</span> <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00080"></a>00080 _dbus_write_pid_file (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *filename,
<a name="l00081"></a>00081                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>     pid,
<a name="l00082"></a>00082                       <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error)
<a name="l00083"></a>00083 {
<a name="l00084"></a>00084   <span class="keyword">const</span> <span class="keywordtype">char</span> *cfilename;
<a name="l00085"></a>00085   HANDLE hnd;
<a name="l00086"></a>00086   <span class="keywordtype">char</span> pidstr[20];
<a name="l00087"></a>00087   <span class="keywordtype">int</span> total;
<a name="l00088"></a>00088   <span class="keywordtype">int</span> bytes_to_write;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   _DBUS_ASSERT_ERROR_IS_CLEAR (error);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   cfilename = _dbus_string_get_const_data (filename);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   hnd = CreateFileA (cfilename, GENERIC_WRITE,
<a name="l00095"></a>00095                      FILE_SHARE_READ | FILE_SHARE_WRITE,
<a name="l00096"></a>00096                      <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>, CREATE_NEW, FILE_ATTRIBUTE_NORMAL,
<a name="l00097"></a>00097                      INVALID_HANDLE_VALUE);
<a name="l00098"></a>00098   <span class="keywordflow">if</span> (hnd == INVALID_HANDLE_VALUE)
<a name="l00099"></a>00099     {
<a name="l00100"></a>00100       <span class="keywordtype">char</span> *emsg = _dbus_win_error_string (GetLastError ());
<a name="l00101"></a>00101       <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, _dbus_win_error_from_last_error (),
<a name="l00102"></a>00102                       <span class="stringliteral">&quot;Could not create PID file %s: %s&quot;</span>,
<a name="l00103"></a>00103                       cfilename, emsg);
<a name="l00104"></a>00104       _dbus_win_free_error_string (emsg);
<a name="l00105"></a>00105       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="keywordflow">if</span> (snprintf (pidstr, <span class="keyword">sizeof</span> (pidstr), <span class="stringliteral">&quot;%lu\n&quot;</span>, pid) &lt; 0)
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110       <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, <a class="code" href="group__DBusInternalsUtils.html#gaf4f1db48d66dcb310b9771beb955578e" title="Converts the current system errno value into a DBusError name.">_dbus_error_from_system_errno</a> (),
<a name="l00111"></a>00111                       <span class="stringliteral">&quot;Failed to format PID for \&quot;%s\&quot;: %s&quot;</span>, cfilename,
<a name="l00112"></a>00112                       <a class="code" href="group__DBusInternalsUtils.html#ga56de84795d6df4162ad79b3be7af7588" title="Get error message from errno.">_dbus_strerror_from_errno</a> ());
<a name="l00113"></a>00113       CloseHandle (hnd);
<a name="l00114"></a>00114       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00115"></a>00115     }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117   total = 0;
<a name="l00118"></a>00118   bytes_to_write = strlen (pidstr);;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="keywordflow">while</span> (total &lt; bytes_to_write)
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122       DWORD bytes_written;
<a name="l00123"></a>00123       BOOL res;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125       res = WriteFile (hnd, pidstr + total, bytes_to_write - total,
<a name="l00126"></a>00126                        &amp;bytes_written, <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128       <span class="keywordflow">if</span> (res == 0 || bytes_written &lt;= 0)
<a name="l00129"></a>00129         {
<a name="l00130"></a>00130           <span class="keywordtype">char</span> *emsg = _dbus_win_error_string (GetLastError ());
<a name="l00131"></a>00131           <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, _dbus_win_error_from_last_error (),
<a name="l00132"></a>00132                            <span class="stringliteral">&quot;Could not write to %s: %s&quot;</span>, cfilename, emsg);
<a name="l00133"></a>00133           _dbus_win_free_error_string (emsg);
<a name="l00134"></a>00134           CloseHandle (hnd);
<a name="l00135"></a>00135           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138       total += bytes_written;
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (CloseHandle (hnd) == 0)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143       <span class="keywordtype">char</span> *emsg = _dbus_win_error_string (GetLastError ());
<a name="l00144"></a>00144       <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, _dbus_win_error_from_last_error (),
<a name="l00145"></a>00145                        <span class="stringliteral">&quot;Could not close file %s: %s&quot;</span>,
<a name="l00146"></a>00146                       cfilename, emsg);
<a name="l00147"></a>00147       _dbus_win_free_error_string (emsg);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00150"></a>00150     }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00153"></a>00153 }
<a name="l00154"></a>00154 
<a name="l00166"></a>00166 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00167"></a><a class="code" href="group__DBusSysdeps.html#ga123620ec5ce2b881786588121d6a03fd">00167</a> <a class="code" href="group__DBusInternalsUtils.html#ga123620ec5ce2b881786588121d6a03fd" title="Writes the given pid_to_write to a pidfile (if non-NULL) and/or to a pipe (if non-NULL).">_dbus_write_pid_to_file_and_pipe</a> (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *pidfile,
<a name="l00168"></a>00168                                   <a class="code" href="structDBusPipe.html">DBusPipe</a>         *print_pid_pipe,
<a name="l00169"></a>00169                                   <a class="code" href="group__DBusSysdeps.html#ga1eff6303266888ec466cddba6c03aa40" title="A process ID.">dbus_pid_t</a>        pid_to_write,
<a name="l00170"></a>00170                                   <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error)
<a name="l00171"></a>00171 {
<a name="l00172"></a>00172   <span class="keywordflow">if</span> (pidfile)
<a name="l00173"></a>00173     {
<a name="l00174"></a>00174       _dbus_verbose (<span class="stringliteral">&quot;writing pid file %s\n&quot;</span>, _dbus_string_get_const_data (pidfile));
<a name="l00175"></a>00175       <span class="keywordflow">if</span> (!_dbus_write_pid_file (pidfile,
<a name="l00176"></a>00176                                  pid_to_write,
<a name="l00177"></a>00177                                  error))
<a name="l00178"></a>00178         {
<a name="l00179"></a>00179           _dbus_verbose (<span class="stringliteral">&quot;pid file write failed\n&quot;</span>);
<a name="l00180"></a>00180           _DBUS_ASSERT_ERROR_IS_SET(error);
<a name="l00181"></a>00181           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184   <span class="keywordflow">else</span>
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186       _dbus_verbose (<span class="stringliteral">&quot;No pid file requested\n&quot;</span>);
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="keywordflow">if</span> (print_pid_pipe != <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> &amp;&amp; _dbus_pipe_is_valid (print_pid_pipe))
<a name="l00190"></a>00190     {
<a name="l00191"></a>00191       <a class="code" href="structDBusString.html">DBusString</a> pid;
<a name="l00192"></a>00192       <span class="keywordtype">int</span> bytes;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194       _dbus_verbose (<span class="stringliteral">&quot;writing our pid to pipe %d\n&quot;</span>, print_pid_pipe-&gt;fd);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196       <span class="keywordflow">if</span> (!<a class="code" href="group__DBusString.html#ga348252317f7bb8ac43529972945830ae" title="Initializes a string.">_dbus_string_init</a> (&amp;pid))
<a name="l00197"></a>00197         {
<a name="l00198"></a>00198           _DBUS_SET_OOM (error);
<a name="l00199"></a>00199           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00200"></a>00200         }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202       <span class="keywordflow">if</span> (!<a class="code" href="group__DBusString.html#ga41141ca36c361f92b6029530ff83fa66" title="Appends an integer to a DBusString.">_dbus_string_append_int</a> (&amp;pid, pid_to_write) ||
<a name="l00203"></a>00203           !<a class="code" href="group__DBusString.html#ga100c5ce0696822c5a4cfbdfaba674d96" title="Appends a nul-terminated C-style string to a DBusString.">_dbus_string_append</a> (&amp;pid, <span class="stringliteral">&quot;\n&quot;</span>))
<a name="l00204"></a>00204         {
<a name="l00205"></a>00205           <a class="code" href="group__DBusString.html#ga781ca91acda49a834dce7d0ed0eef212" title="Frees a string created by _dbus_string_init().">_dbus_string_free</a> (&amp;pid);
<a name="l00206"></a>00206           _DBUS_SET_OOM (error);
<a name="l00207"></a>00207           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00208"></a>00208         }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210       bytes = _dbus_string_get_length (&amp;pid);
<a name="l00211"></a>00211       <span class="keywordflow">if</span> (_dbus_pipe_write (print_pid_pipe, &amp;pid, 0, bytes, error) != bytes)
<a name="l00212"></a>00212         {
<a name="l00213"></a>00213           <span class="comment">/* _dbus_pipe_write sets error only on failure, not short write */</span>
<a name="l00214"></a>00214           <span class="keywordflow">if</span> (error != <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a> &amp;&amp; !<a class="code" href="group__DBusErrors.html#gab0ed62e9fc2685897eb2d41467c89405" title="Checks whether an error occurred (the error is set).">dbus_error_is_set</a>(error))
<a name="l00215"></a>00215             {
<a name="l00216"></a>00216               <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, <a class="code" href="group__DBusProtocol.html#gabb62fd6340d0787fbd56ff8dd2f326c7" title="A generic error; &quot;something went wrong&quot; - see the error message for more.">DBUS_ERROR_FAILED</a>,
<a name="l00217"></a>00217                               <span class="stringliteral">&quot;Printing message bus PID: did not write enough bytes\n&quot;</span>);
<a name="l00218"></a>00218             }
<a name="l00219"></a>00219           <a class="code" href="group__DBusString.html#ga781ca91acda49a834dce7d0ed0eef212" title="Frees a string created by _dbus_string_init().">_dbus_string_free</a> (&amp;pid);
<a name="l00220"></a>00220           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00221"></a>00221         }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223       <a class="code" href="group__DBusString.html#ga781ca91acda49a834dce7d0ed0eef212" title="Frees a string created by _dbus_string_init().">_dbus_string_free</a> (&amp;pid);
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225   <span class="keywordflow">else</span>
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       _dbus_verbose (<span class="stringliteral">&quot;No pid pipe to write to\n&quot;</span>);
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00239"></a>00239 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00240"></a><a class="code" href="group__DBusSysdeps.html#ga45f661c5a089ed45233a1acabaf31964">00240</a> <a class="code" href="group__DBusInternalsUtils.html#ga45f661c5a089ed45233a1acabaf31964" title="Verify that after the fork we can successfully change to this user.">_dbus_verify_daemon_user</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *user)
<a name="l00241"></a>00241 {
<a name="l00242"></a>00242   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00252"></a>00252 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00253"></a><a class="code" href="group__DBusSysdeps.html#ga82c920a8c3b5958ba1ecf8e5f5d6373b">00253</a> <a class="code" href="group__DBusInternalsUtils.html#ga82c920a8c3b5958ba1ecf8e5f5d6373b" title="Changes the user and group the bus is running as.">_dbus_change_to_daemon_user</a>  (<span class="keyword">const</span> <span class="keywordtype">char</span>    *user,
<a name="l00254"></a>00254                               <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>     *error)
<a name="l00255"></a>00255 {
<a name="l00256"></a>00256   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="keywordtype">void</span>
<a name="l00260"></a><a class="code" href="group__DBusSysdeps.html#ga71f3b28976150c795cf3b0f2cae2de7f">00260</a> <a class="code" href="group__DBusInternalsUtils.html#ga71f3b28976150c795cf3b0f2cae2de7f" title="Attempt to ensure that the current process can open at least  file descriptors.">_dbus_request_file_descriptor_limit</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limit)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262 }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 <span class="keywordtype">void</span>
<a name="l00265"></a>00265 _dbus_init_system_log (<span class="keywordtype">void</span>)
<a name="l00266"></a>00266 {
<a name="l00267"></a>00267   <span class="comment">/* OutputDebugStringA doesn&#39;t need any special initialization, do nothing */</span>
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00278"></a>00278 <span class="keywordtype">void</span>
<a name="l00279"></a><a class="code" href="group__DBusSysdeps.html#ga73a19aaac889c47ba5f6caa5107a47a5">00279</a> <a class="code" href="group__DBusInternalsUtils.html#ga73a19aaac889c47ba5f6caa5107a47a5" title="Log a message to the system log file (e.g.">_dbus_system_log</a> (DBusSystemLogSeverity severity, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg, ...)
<a name="l00280"></a>00280 {
<a name="l00281"></a>00281   va_list args;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   va_start (args, msg);
<a name="l00284"></a>00284 
<a name="l00285"></a>00285   <a class="code" href="group__DBusInternalsUtils.html#ga82cb5dfe162480ad15faddcf74ea0617" title="Log a message to the system log file (e.g.">_dbus_system_logv</a> (severity, msg, args);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287   va_end (args);
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00300"></a>00300 <span class="keywordtype">void</span>
<a name="l00301"></a><a class="code" href="group__DBusSysdeps.html#ga82cb5dfe162480ad15faddcf74ea0617">00301</a> <a class="code" href="group__DBusInternalsUtils.html#ga82cb5dfe162480ad15faddcf74ea0617" title="Log a message to the system log file (e.g.">_dbus_system_logv</a> (DBusSystemLogSeverity severity, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg, va_list args)
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303   <span class="keywordtype">char</span> *s = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00304"></a>00304   <span class="keywordtype">char</span> buf[1024];
<a name="l00305"></a>00305   
<a name="l00306"></a>00306   <span class="keywordflow">switch</span>(severity) 
<a name="l00307"></a>00307    {
<a name="l00308"></a>00308      <span class="keywordflow">case</span> DBUS_SYSTEM_LOG_INFO: s = <span class="stringliteral">&quot;info&quot;</span>; <span class="keywordflow">break</span>;
<a name="l00309"></a>00309      <span class="keywordflow">case</span> DBUS_SYSTEM_LOG_SECURITY: s = <span class="stringliteral">&quot;security&quot;</span>; <span class="keywordflow">break</span>;
<a name="l00310"></a>00310      <span class="keywordflow">case</span> DBUS_SYSTEM_LOG_FATAL: s = <span class="stringliteral">&quot;fatal&quot;</span>; <span class="keywordflow">break</span>;
<a name="l00311"></a>00311    }
<a name="l00312"></a>00312    
<a name="l00313"></a>00313   sprintf(buf,<span class="stringliteral">&quot;%s%s&quot;</span>,s,msg);
<a name="l00314"></a>00314   vsprintf(buf,buf,args);
<a name="l00315"></a>00315   OutputDebugStringA(buf);
<a name="l00316"></a>00316   
<a name="l00317"></a>00317   <span class="keywordflow">if</span> (severity == DBUS_SYSTEM_LOG_FATAL)
<a name="l00318"></a>00318     exit (1);
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00326"></a>00326 <span class="keywordtype">void</span>
<a name="l00327"></a><a class="code" href="group__DBusSysdeps.html#ga4aa7500366dad2dd6d3fa97b3aa7165b">00327</a> <a class="code" href="group__DBusInternalsUtils.html#ga4aa7500366dad2dd6d3fa97b3aa7165b" title="Installs a UNIX signal handler.">_dbus_set_signal_handler</a> (<span class="keywordtype">int</span>               sig,
<a name="l00328"></a>00328                           <a class="code" href="group__DBusSysdeps.html#ga5c69cb20ec385aa86a213c898149f8ea" title="A UNIX signal handler.">DBusSignalHandler</a> handler)
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330   _dbus_verbose (<span class="stringliteral">&quot;_dbus_set_signal_handler() has to be implemented\n&quot;</span>);
<a name="l00331"></a>00331 }
<a name="l00332"></a>00332 
<a name="l00341"></a>00341 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00342"></a><a class="code" href="group__DBusSysdeps.html#ga04e98ad0e3a181f0a5921a4cbc49cf08">00342</a> <a class="code" href="group__DBusInternalsUtils.html#ga04e98ad0e3a181f0a5921a4cbc49cf08" title="stat() wrapper.">_dbus_stat</a>(<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *filename,
<a name="l00343"></a>00343            <a class="code" href="structDBusStat.html" title="Portable struct with stat() results.">DBusStat</a>         *statbuf,
<a name="l00344"></a>00344            <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error)
<a name="l00345"></a>00345 {
<a name="l00346"></a>00346   <span class="keyword">const</span> <span class="keywordtype">char</span> *filename_c;
<a name="l00347"></a>00347   WIN32_FILE_ATTRIBUTE_DATA wfad;
<a name="l00348"></a>00348   <span class="keywordtype">char</span> *lastdot;
<a name="l00349"></a>00349   DWORD rc;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   _DBUS_ASSERT_ERROR_IS_CLEAR (error);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353   filename_c = _dbus_string_get_const_data (filename);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (!GetFileAttributesExA (filename_c, GetFileExInfoStandard, &amp;wfad))
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357       _dbus_win_set_error_from_win_error (error, GetLastError ());
<a name="l00358"></a>00358       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (wfad.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)
<a name="l00362"></a>00362     statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> = _S_IFDIR;
<a name="l00363"></a>00363   <span class="keywordflow">else</span>
<a name="l00364"></a>00364     statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> = _S_IFREG;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366   statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> |= _S_IREAD;
<a name="l00367"></a>00367   <span class="keywordflow">if</span> (wfad.dwFileAttributes &amp; FILE_ATTRIBUTE_READONLY)
<a name="l00368"></a>00368     statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> |= _S_IWRITE;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   lastdot = strrchr (filename_c, <span class="charliteral">&#39;.&#39;</span>);
<a name="l00371"></a>00371   <span class="keywordflow">if</span> (lastdot &amp;&amp; stricmp (lastdot, <span class="stringliteral">&quot;.exe&quot;</span>) == 0)
<a name="l00372"></a>00372     statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> |= _S_IEXEC;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374   statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> |= (statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> &amp; 0700) &gt;&gt; 3;
<a name="l00375"></a>00375   statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> |= (statbuf-&gt;<a class="code" href="structDBusStat.html#a722ec64f90cf29e0b8bafaea55b90d27" title="File mode.">mode</a> &amp; 0700) &gt;&gt; 6;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   statbuf-&gt;<a class="code" href="structDBusStat.html#a1b5ef4ce7f46c798d4b222c61f8912f7" title="Number of hard links.">nlink</a> = 1;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="preprocessor">#ifdef ENABLE_UID_TO_SID</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>  {
<a name="l00381"></a>00381     PSID owner_sid, group_sid;
<a name="l00382"></a>00382     PSECURITY_DESCRIPTOR sd;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     sd = <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00385"></a>00385     rc = GetNamedSecurityInfo ((<span class="keywordtype">char</span> *) filename_c, SE_FILE_OBJECT,
<a name="l00386"></a>00386                                OWNER_SECURITY_INFORMATION |
<a name="l00387"></a>00387                                GROUP_SECURITY_INFORMATION,
<a name="l00388"></a>00388                                &amp;owner_sid, &amp;group_sid,
<a name="l00389"></a>00389                                <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>, <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>,
<a name="l00390"></a>00390                                &amp;sd);
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (rc != ERROR_SUCCESS)
<a name="l00392"></a>00392       {
<a name="l00393"></a>00393         _dbus_win_set_error_from_win_error (error, rc);
<a name="l00394"></a>00394         <span class="keywordflow">if</span> (sd != <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>)
<a name="l00395"></a>00395           LocalFree (sd);
<a name="l00396"></a>00396         <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00397"></a>00397       }
<a name="l00398"></a>00398     
<a name="l00399"></a>00399     <span class="comment">/* FIXME */</span>
<a name="l00400"></a>00400     statbuf-&gt;<a class="code" href="structDBusStat.html#a300fac914534803bcfacdd87b15e1a8d" title="User owning file.">uid</a> = _dbus_win_sid_to_uid_t (owner_sid);
<a name="l00401"></a>00401     statbuf-&gt;<a class="code" href="structDBusStat.html#a98dd4c45ffc8488b399cb3feb57ef48c" title="Group owning file.">gid</a> = _dbus_win_sid_to_uid_t (group_sid);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     LocalFree (sd);
<a name="l00404"></a>00404   }
<a name="l00405"></a>00405 <span class="preprocessor">#else</span>
<a name="l00406"></a>00406 <span class="preprocessor"></span>  statbuf-&gt;<a class="code" href="structDBusStat.html#a300fac914534803bcfacdd87b15e1a8d" title="User owning file.">uid</a> = <a class="code" href="group__DBusSysdeps.html#ga3d2f3fb32bb759cabe362ca2de383f7d" title="an invalid UID used to represent an uninitialized dbus_uid_t field">DBUS_UID_UNSET</a>;
<a name="l00407"></a>00407   statbuf-&gt;<a class="code" href="structDBusStat.html#a98dd4c45ffc8488b399cb3feb57ef48c" title="Group owning file.">gid</a> = <a class="code" href="group__DBusSysdeps.html#ga768a080926a119a6131083facc0bd42b" title="an invalid GID used to represent an uninitialized dbus_gid_t field">DBUS_GID_UNSET</a>;
<a name="l00408"></a>00408 <span class="preprocessor">#endif</span>
<a name="l00409"></a>00409 <span class="preprocessor"></span>
<a name="l00410"></a>00410   statbuf-&gt;<a class="code" href="structDBusStat.html#a1b8b518248d41601766ae955bdca0de2" title="Size of file.">size</a> = ((dbus_int64_t) wfad.nFileSizeHigh &lt;&lt; 32) + wfad.nFileSizeLow;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   statbuf-&gt;<a class="code" href="structDBusStat.html#a9c68f29816af750a47d80177a23d6cf1" title="Access time.">atime</a> =
<a name="l00413"></a>00413     (((dbus_int64_t) wfad.ftLastAccessTime.dwHighDateTime &lt;&lt; 32) +
<a name="l00414"></a>00414      wfad.ftLastAccessTime.dwLowDateTime) / 10000000 - DBUS_INT64_CONSTANT (116444736000000000);
<a name="l00415"></a>00415 
<a name="l00416"></a>00416   statbuf-&gt;<a class="code" href="structDBusStat.html#acf4750b66ccb06b49c7eaf2405d8c417" title="Modify time.">mtime</a> =
<a name="l00417"></a>00417     (((dbus_int64_t) wfad.ftLastWriteTime.dwHighDateTime &lt;&lt; 32) +
<a name="l00418"></a>00418      wfad.ftLastWriteTime.dwLowDateTime) / 10000000 - DBUS_INT64_CONSTANT (116444736000000000);
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   statbuf-&gt;<a class="code" href="structDBusStat.html#aceb3c4a3230d1a9063baee27c140fbb3" title="Creation time.">ctime</a> =
<a name="l00421"></a>00421     (((dbus_int64_t) wfad.ftCreationTime.dwHighDateTime &lt;&lt; 32) +
<a name="l00422"></a>00422      wfad.ftCreationTime.dwLowDateTime) / 10000000 - DBUS_INT64_CONSTANT (116444736000000000);
<a name="l00423"></a>00423 
<a name="l00424"></a>00424   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 <span class="comment">/* This file is part of the KDE project</span>
<a name="l00429"></a>00429 <span class="comment">Copyright (C) 2000 Werner Almesberger</span>
<a name="l00430"></a>00430 <span class="comment"></span>
<a name="l00431"></a>00431 <span class="comment">libc/sys/linux/sys/dirent.h - Directory entry as returned by readdir</span>
<a name="l00432"></a>00432 <span class="comment"></span>
<a name="l00433"></a>00433 <span class="comment">This program is free software; you can redistribute it and/or</span>
<a name="l00434"></a>00434 <span class="comment">modify it under the terms of the GNU Library General Public</span>
<a name="l00435"></a>00435 <span class="comment">License as published by the Free Software Foundation; either</span>
<a name="l00436"></a>00436 <span class="comment">version 2 of the License, or (at your option) any later version.</span>
<a name="l00437"></a>00437 <span class="comment"></span>
<a name="l00438"></a>00438 <span class="comment">This program is distributed in the hope that it will be useful,</span>
<a name="l00439"></a>00439 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00440"></a>00440 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00441"></a>00441 <span class="comment">Library General Public License for more details.</span>
<a name="l00442"></a>00442 <span class="comment"></span>
<a name="l00443"></a>00443 <span class="comment">You should have received a copy of the GNU Library General Public License</span>
<a name="l00444"></a>00444 <span class="comment">along with this program; see the file COPYING.  If not, write to</span>
<a name="l00445"></a>00445 <span class="comment">the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,</span>
<a name="l00446"></a>00446 <span class="comment">Boston, MA 02110-1301, USA.</span>
<a name="l00447"></a>00447 <span class="comment">*/</span>
<a name="l00448"></a>00448 <span class="preprocessor">#define HAVE_NO_D_NAMLEN        </span><span class="comment">/* no struct dirent-&gt;d_namlen */</span>
<a name="l00449"></a>00449 <span class="preprocessor">#define HAVE_DD_LOCK            </span><span class="comment">/* have locking mechanism */</span>
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 <span class="preprocessor">#define MAXNAMLEN 255           </span><span class="comment">/* sizeof(struct dirent.d_name)-1 */</span>
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 <span class="preprocessor">#define __dirfd(dir) (dir)-&gt;dd_fd</span>
<a name="l00454"></a>00454 <span class="preprocessor"></span>
<a name="l00455"></a>00455 <span class="comment">/* struct dirent - same as Unix */</span>
<a name="l00456"></a><a class="code" href="structdirent.html">00456</a> <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a>
<a name="l00457"></a>00457   {
<a name="l00458"></a>00458     <span class="keywordtype">long</span> d_ino;                    <span class="comment">/* inode (always 1 in WIN32) */</span>
<a name="l00459"></a>00459     off_t d_off;                <span class="comment">/* offset to this dirent */</span>
<a name="l00460"></a>00460     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> d_reclen;    <span class="comment">/* length of d_name */</span>
<a name="l00461"></a>00461     <span class="keywordtype">char</span> d_name[_MAX_FNAME+1];    <span class="comment">/* filename (null terminated) */</span>
<a name="l00462"></a>00462   };
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 <span class="comment">/* typedef DIR - not the same as Unix */</span>
<a name="l00465"></a><a class="code" href="structDIR.html">00465</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00466"></a>00466   {
<a name="l00467"></a>00467     HANDLE handle;              <span class="comment">/* FindFirst/FindNext handle */</span>
<a name="l00468"></a>00468     <span class="keywordtype">short</span> offset;               <span class="comment">/* offset into directory */</span>
<a name="l00469"></a>00469     <span class="keywordtype">short</span> finished;             <span class="comment">/* 1 if there are not more files */</span>
<a name="l00470"></a>00470     WIN32_FIND_DATAA fileinfo;  <span class="comment">/* from FindFirst/FindNext */</span>
<a name="l00471"></a>00471     <span class="keywordtype">char</span> *dir;                  <span class="comment">/* the dir we are reading */</span>
<a name="l00472"></a>00472     <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a> dent;         <span class="comment">/* the dirent to return */</span>
<a name="l00473"></a>00473   }
<a name="l00474"></a>00474 <a class="code" href="structDIR.html">DIR</a>;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476 <span class="comment">/**********************************************************************</span>
<a name="l00477"></a>00477 <span class="comment">* Implement dirent-style opendir/readdir/closedir on Window 95/NT</span>
<a name="l00478"></a>00478 <span class="comment">*</span>
<a name="l00479"></a>00479 <span class="comment">* Functions defined are opendir(), readdir() and closedir() with the</span>
<a name="l00480"></a>00480 <span class="comment">* same prototypes as the normal dirent.h implementation.</span>
<a name="l00481"></a>00481 <span class="comment">*</span>
<a name="l00482"></a>00482 <span class="comment">* Does not implement telldir(), seekdir(), rewinddir() or scandir().</span>
<a name="l00483"></a>00483 <span class="comment">* The dirent struct is compatible with Unix, except that d_ino is</span>
<a name="l00484"></a>00484 <span class="comment">* always 1 and d_off is made up as we go along.</span>
<a name="l00485"></a>00485 <span class="comment">*</span>
<a name="l00486"></a>00486 <span class="comment">* Error codes are not available with errno but GetLastError.</span>
<a name="l00487"></a>00487 <span class="comment">*</span>
<a name="l00488"></a>00488 <span class="comment">* The DIR typedef is not compatible with Unix.</span>
<a name="l00489"></a>00489 <span class="comment">**********************************************************************/</span>
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 <span class="keyword">static</span> <a class="code" href="structDIR.html">DIR</a> * _dbus_opendir(<span class="keyword">const</span> <span class="keywordtype">char</span> *dir)
<a name="l00492"></a>00492 {
<a name="l00493"></a>00493   <a class="code" href="structDIR.html">DIR</a> *dp;
<a name="l00494"></a>00494   <span class="keywordtype">char</span> *filespec;
<a name="l00495"></a>00495   HANDLE handle;
<a name="l00496"></a>00496   <span class="keywordtype">int</span> index;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   filespec = malloc(strlen(dir) + 2 + 1);
<a name="l00499"></a>00499   strcpy(filespec, dir);
<a name="l00500"></a>00500   index = strlen(filespec) - 1;
<a name="l00501"></a>00501   <span class="keywordflow">if</span> (index &gt;= 0 &amp;&amp; (filespec[index] == <span class="charliteral">&#39;/&#39;</span> || filespec[index] == <span class="charliteral">&#39;\\&#39;</span>))
<a name="l00502"></a>00502     filespec[index] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00503"></a>00503   strcat(filespec, <span class="stringliteral">&quot;\\*&quot;</span>);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505   dp = (<a class="code" href="structDIR.html">DIR</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structDIR.html">DIR</a>));
<a name="l00506"></a>00506   dp-&gt;offset = 0;
<a name="l00507"></a>00507   dp-&gt;finished = 0;
<a name="l00508"></a>00508   dp-&gt;dir = strdup(dir);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   handle = FindFirstFileA(filespec, &amp;(dp-&gt;fileinfo));
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (handle == INVALID_HANDLE_VALUE)
<a name="l00512"></a>00512     {
<a name="l00513"></a>00513       <span class="keywordflow">if</span> (GetLastError() == ERROR_NO_MORE_FILES)
<a name="l00514"></a>00514         dp-&gt;finished = 1;
<a name="l00515"></a>00515       <span class="keywordflow">else</span>
<a name="l00516"></a>00516         <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00517"></a>00517     }
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   dp-&gt;handle = handle;
<a name="l00520"></a>00520   free(filespec);
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="keywordflow">return</span> dp;
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a> * _dbus_readdir(<a class="code" href="structDIR.html">DIR</a> *dp)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527   <span class="keywordtype">int</span> saved_err = GetLastError();
<a name="l00528"></a>00528 
<a name="l00529"></a>00529   <span class="keywordflow">if</span> (!dp || dp-&gt;finished)
<a name="l00530"></a>00530     <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00531"></a>00531 
<a name="l00532"></a>00532   <span class="keywordflow">if</span> (dp-&gt;offset != 0)
<a name="l00533"></a>00533     {
<a name="l00534"></a>00534       <span class="keywordflow">if</span> (FindNextFileA(dp-&gt;handle, &amp;(dp-&gt;fileinfo)) == 0)
<a name="l00535"></a>00535         {
<a name="l00536"></a>00536           <span class="keywordflow">if</span> (GetLastError() == ERROR_NO_MORE_FILES)
<a name="l00537"></a>00537             {
<a name="l00538"></a>00538               SetLastError(saved_err);
<a name="l00539"></a>00539               dp-&gt;finished = 1;
<a name="l00540"></a>00540             }
<a name="l00541"></a>00541           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544   dp-&gt;offset++;
<a name="l00545"></a>00545   
<a name="l00546"></a>00546   strncpy(dp-&gt;dent.d_name, dp-&gt;fileinfo.cFileName, _MAX_FNAME);
<a name="l00547"></a>00547   dp-&gt;dent.d_ino = 1;
<a name="l00548"></a>00548   dp-&gt;dent.d_reclen = strlen(dp-&gt;dent.d_name);
<a name="l00549"></a>00549   dp-&gt;dent.d_off = dp-&gt;offset;
<a name="l00550"></a>00550   
<a name="l00551"></a>00551   <span class="keywordflow">return</span> &amp;(dp-&gt;dent);
<a name="l00552"></a>00552 }
<a name="l00553"></a>00553 
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="keyword">static</span> <span class="keywordtype">int</span> _dbus_closedir(<a class="code" href="structDIR.html">DIR</a> *dp)
<a name="l00556"></a>00556 {
<a name="l00557"></a>00557   <span class="keywordflow">if</span> (!dp)
<a name="l00558"></a>00558     <span class="keywordflow">return</span> 0;
<a name="l00559"></a>00559   FindClose(dp-&gt;handle);
<a name="l00560"></a>00560   <span class="keywordflow">if</span> (dp-&gt;dir)
<a name="l00561"></a>00561     free(dp-&gt;dir);
<a name="l00562"></a>00562   <span class="keywordflow">if</span> (dp)
<a name="l00563"></a>00563     free(dp);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="keywordflow">return</span> 0;
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 
<a name="l00572"></a>00572 <span class="keyword">struct </span><a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a>
<a name="l00573"></a>00573   {
<a name="l00574"></a>00574     <a class="code" href="structDIR.html">DIR</a> *<a class="code" href="structDBusDirIter.html#a8e13e4d8bd6d55387d91cfe32ca84040" title="The DIR* from opendir()">d</a>; 
<a name="l00576"></a>00576   };
<a name="l00577"></a>00577 
<a name="l00585"></a>00585 <a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a>*
<a name="l00586"></a><a class="code" href="group__DBusSysdeps.html#gaaf6eb8179fb6ea2175ed9742a0c8be68">00586</a> <a class="code" href="group__DBusInternalsUtils.html#gaaf6eb8179fb6ea2175ed9742a0c8be68" title="Open a directory to iterate over.">_dbus_directory_open</a> (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *filename,
<a name="l00587"></a>00587                       <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error)
<a name="l00588"></a>00588 {
<a name="l00589"></a>00589   <a class="code" href="structDIR.html">DIR</a> *d;
<a name="l00590"></a>00590   <a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a> *iter;
<a name="l00591"></a>00591   <span class="keyword">const</span> <span class="keywordtype">char</span> *filename_c;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593   _DBUS_ASSERT_ERROR_IS_CLEAR (error);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595   filename_c = _dbus_string_get_const_data (filename);
<a name="l00596"></a>00596 
<a name="l00597"></a>00597   d = _dbus_opendir (filename_c);
<a name="l00598"></a>00598   <span class="keywordflow">if</span> (d == <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>)
<a name="l00599"></a>00599     {
<a name="l00600"></a>00600       <span class="keywordtype">char</span> *emsg = _dbus_win_error_string (GetLastError ());
<a name="l00601"></a>00601       <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, _dbus_win_error_from_last_error (),
<a name="l00602"></a>00602                       <span class="stringliteral">&quot;Failed to read directory \&quot;%s\&quot;: %s&quot;</span>,
<a name="l00603"></a>00603                       filename_c, emsg);
<a name="l00604"></a>00604       _dbus_win_free_error_string (emsg);
<a name="l00605"></a>00605       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00606"></a>00606     }
<a name="l00607"></a>00607   iter = <a class="code" href="group__DBusMemory.html#gaba9d823abda7f4cadbaf5177d3b8b793" title="Safe macro for using dbus_malloc0().">dbus_new0</a> (<a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a>, 1);
<a name="l00608"></a>00608   <span class="keywordflow">if</span> (iter == <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>)
<a name="l00609"></a>00609     {
<a name="l00610"></a>00610       _dbus_closedir (d);
<a name="l00611"></a>00611       <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, <a class="code" href="group__DBusProtocol.html#gac32eaf0b92f798307853cd4fe0cf11c2" title="There was not enough memory to complete an operation.">DBUS_ERROR_NO_MEMORY</a>,
<a name="l00612"></a>00612                       <span class="stringliteral">&quot;Could not allocate memory for directory iterator&quot;</span>);
<a name="l00613"></a>00613       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>;
<a name="l00614"></a>00614     }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616   iter-&gt;<a class="code" href="structDBusDirIter.html#a8e13e4d8bd6d55387d91cfe32ca84040" title="The DIR* from opendir()">d</a> = d;
<a name="l00617"></a>00617 
<a name="l00618"></a>00618   <span class="keywordflow">return</span> iter;
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00634"></a>00634 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00635"></a><a class="code" href="group__DBusSysdeps.html#gab9a2ddb130da035d6186f2d96bf37cb4">00635</a> <a class="code" href="group__DBusInternalsUtils.html#gab9a2ddb130da035d6186f2d96bf37cb4" title="Get next file in the directory.">_dbus_directory_get_next_file</a> (<a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a>      *iter,
<a name="l00636"></a>00636                                <a class="code" href="structDBusString.html">DBusString</a>       *filename,
<a name="l00637"></a>00637                                <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>        *error)
<a name="l00638"></a>00638 {
<a name="l00639"></a>00639   <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a> *ent;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641   _DBUS_ASSERT_ERROR_IS_CLEAR (error);
<a name="l00642"></a>00642 
<a name="l00643"></a>00643 again:
<a name="l00644"></a>00644   SetLastError (0);
<a name="l00645"></a>00645   ent = _dbus_readdir (iter-&gt;<a class="code" href="structDBusDirIter.html#a8e13e4d8bd6d55387d91cfe32ca84040" title="The DIR* from opendir()">d</a>);
<a name="l00646"></a>00646   <span class="keywordflow">if</span> (ent == <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>)
<a name="l00647"></a>00647     {
<a name="l00648"></a>00648       <span class="keywordflow">if</span> (GetLastError() != 0)
<a name="l00649"></a>00649         {
<a name="l00650"></a>00650           <span class="keywordtype">char</span> *emsg = _dbus_win_error_string (GetLastError ());
<a name="l00651"></a>00651           <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, _dbus_win_error_from_last_error (),
<a name="l00652"></a>00652                           <span class="stringliteral">&quot;Failed to get next in directory: %s&quot;</span>, emsg);
<a name="l00653"></a>00653           _dbus_win_free_error_string (emsg);
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655       <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ent-&gt;d_name[0] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp;
<a name="l00658"></a>00658            (ent-&gt;d_name[1] == <span class="charliteral">&#39;\0&#39;</span> ||
<a name="l00659"></a>00659             (ent-&gt;d_name[1] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; ent-&gt;d_name[2] == <span class="charliteral">&#39;\0&#39;</span>)))
<a name="l00660"></a>00660     <span class="keywordflow">goto</span> again;
<a name="l00661"></a>00661   <span class="keywordflow">else</span>
<a name="l00662"></a>00662     {
<a name="l00663"></a>00663       <a class="code" href="group__DBusString.html#ga08c423b93c28dd746dcb93e0461ab95c" title="Sets the length of a string.">_dbus_string_set_length</a> (filename, 0);
<a name="l00664"></a>00664       <span class="keywordflow">if</span> (!<a class="code" href="group__DBusString.html#ga100c5ce0696822c5a4cfbdfaba674d96" title="Appends a nul-terminated C-style string to a DBusString.">_dbus_string_append</a> (filename, ent-&gt;d_name))
<a name="l00665"></a>00665         {
<a name="l00666"></a>00666           <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, <a class="code" href="group__DBusProtocol.html#gac32eaf0b92f798307853cd4fe0cf11c2" title="There was not enough memory to complete an operation.">DBUS_ERROR_NO_MEMORY</a>,
<a name="l00667"></a>00667                           <span class="stringliteral">&quot;No memory to read directory entry&quot;</span>);
<a name="l00668"></a>00668           <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00669"></a>00669         }
<a name="l00670"></a>00670       <span class="keywordflow">else</span>
<a name="l00671"></a>00671         <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00678"></a>00678 <span class="keywordtype">void</span>
<a name="l00679"></a><a class="code" href="group__DBusSysdeps.html#ga1821b64302fe8e12278fa227eb11d393">00679</a> <a class="code" href="group__DBusInternalsUtils.html#ga1821b64302fe8e12278fa227eb11d393" title="Closes a directory iteration.">_dbus_directory_close</a> (<a class="code" href="structDBusDirIter.html" title="Internals of directory iterator.">DBusDirIter</a> *iter)
<a name="l00680"></a>00680 {
<a name="l00681"></a>00681   _dbus_closedir (iter-&gt;<a class="code" href="structDBusDirIter.html#a8e13e4d8bd6d55387d91cfe32ca84040" title="The DIR* from opendir()">d</a>);
<a name="l00682"></a>00682   <a class="code" href="group__DBusMemory.html#ga34e666b19b015035a9a31e53da84b39a" title="Frees a block of memory previously allocated by dbus_malloc() or dbus_malloc0().">dbus_free</a> (iter);
<a name="l00683"></a>00683 }
<a name="l00684"></a>00684  <span class="comment">/* End of DBusInternalsUtils functions */</span>
<a name="l00686"></a>00686 
<a name="l00698"></a>00698 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00699"></a>00699 <a class="code" href="group__DBusString.html#gafa79c1113fa75419dcc5ee4290e06608" title="Get the directory name from a complete filename.">_dbus_string_get_dirname</a>(<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a> *filename,
<a name="l00700"></a>00700                          <a class="code" href="structDBusString.html">DBusString</a>       *dirname)
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702   <span class="keywordtype">int</span> sep;
<a name="l00703"></a>00703 
<a name="l00704"></a>00704   _dbus_assert (filename != dirname);
<a name="l00705"></a>00705   _dbus_assert (filename != <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>);
<a name="l00706"></a>00706   _dbus_assert (dirname != <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>);
<a name="l00707"></a>00707 
<a name="l00708"></a>00708   <span class="comment">/* Ignore any separators on the end */</span>
<a name="l00709"></a>00709   sep = _dbus_string_get_length (filename);
<a name="l00710"></a>00710   <span class="keywordflow">if</span> (sep == 0)
<a name="l00711"></a>00711     <span class="keywordflow">return</span> <a class="code" href="group__DBusString.html#ga100c5ce0696822c5a4cfbdfaba674d96" title="Appends a nul-terminated C-style string to a DBusString.">_dbus_string_append</a> (dirname, <span class="stringliteral">&quot;.&quot;</span>); <span class="comment">/* empty string passed in */</span>
<a name="l00712"></a>00712 
<a name="l00713"></a>00713   <span class="keywordflow">while</span> (sep &gt; 0 &amp;&amp;
<a name="l00714"></a>00714          (_dbus_string_get_byte (filename, sep - 1) == <span class="charliteral">&#39;/&#39;</span> ||
<a name="l00715"></a>00715           _dbus_string_get_byte (filename, sep - 1) == <span class="charliteral">&#39;\\&#39;</span>))
<a name="l00716"></a>00716     --sep;
<a name="l00717"></a>00717 
<a name="l00718"></a>00718   _dbus_assert (sep &gt;= 0);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720   <span class="keywordflow">if</span> (sep == 0 ||
<a name="l00721"></a>00721       (sep == 2 &amp;&amp;
<a name="l00722"></a>00722        _dbus_string_get_byte (filename, 1) == <span class="charliteral">&#39;:&#39;</span> &amp;&amp;
<a name="l00723"></a>00723        isalpha (_dbus_string_get_byte (filename, 0))))
<a name="l00724"></a>00724     <span class="keywordflow">return</span> <a class="code" href="group__DBusString.html#gaf5f13bc7ac7a623516930d26ae2589bf" title="Like _dbus_string_copy(), but can copy a segment from the middle of the source string.">_dbus_string_copy_len</a> (filename, 0, sep + 1,
<a name="l00725"></a>00725                                   dirname, _dbus_string_get_length (dirname));
<a name="l00726"></a>00726 
<a name="l00727"></a>00727   {
<a name="l00728"></a>00728     <span class="keywordtype">int</span> sep1, sep2;
<a name="l00729"></a>00729     <a class="code" href="group__DBusString.html#ga89d458f4f530ee82dbb45f9dcbc9c637" title="Find the given byte scanning backward from the given start.">_dbus_string_find_byte_backward</a> (filename, sep, <span class="charliteral">&#39;/&#39;</span>, &amp;sep1);
<a name="l00730"></a>00730     <a class="code" href="group__DBusString.html#ga89d458f4f530ee82dbb45f9dcbc9c637" title="Find the given byte scanning backward from the given start.">_dbus_string_find_byte_backward</a> (filename, sep, <span class="charliteral">&#39;\\&#39;</span>, &amp;sep2);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732     sep = MAX (sep1, sep2);
<a name="l00733"></a>00733   }
<a name="l00734"></a>00734   <span class="keywordflow">if</span> (sep &lt; 0)
<a name="l00735"></a>00735     <span class="keywordflow">return</span> <a class="code" href="group__DBusString.html#ga100c5ce0696822c5a4cfbdfaba674d96" title="Appends a nul-terminated C-style string to a DBusString.">_dbus_string_append</a> (dirname, <span class="stringliteral">&quot;.&quot;</span>);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737   <span class="keywordflow">while</span> (sep &gt; 0 &amp;&amp;
<a name="l00738"></a>00738          (_dbus_string_get_byte (filename, sep - 1) == <span class="charliteral">&#39;/&#39;</span> ||
<a name="l00739"></a>00739           _dbus_string_get_byte (filename, sep - 1) == <span class="charliteral">&#39;\\&#39;</span>))
<a name="l00740"></a>00740     --sep;
<a name="l00741"></a>00741 
<a name="l00742"></a>00742   _dbus_assert (sep &gt;= 0);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744   <span class="keywordflow">if</span> ((sep == 0 ||
<a name="l00745"></a>00745        (sep == 2 &amp;&amp;
<a name="l00746"></a>00746         _dbus_string_get_byte (filename, 1) == <span class="charliteral">&#39;:&#39;</span> &amp;&amp;
<a name="l00747"></a>00747         isalpha (_dbus_string_get_byte (filename, 0))))
<a name="l00748"></a>00748       &amp;&amp;
<a name="l00749"></a>00749       (_dbus_string_get_byte (filename, sep) == <span class="charliteral">&#39;/&#39;</span> ||
<a name="l00750"></a>00750        _dbus_string_get_byte (filename, sep) == <span class="charliteral">&#39;\\&#39;</span>))
<a name="l00751"></a>00751     <span class="keywordflow">return</span> <a class="code" href="group__DBusString.html#gaf5f13bc7ac7a623516930d26ae2589bf" title="Like _dbus_string_copy(), but can copy a segment from the middle of the source string.">_dbus_string_copy_len</a> (filename, 0, sep + 1,
<a name="l00752"></a>00752                                   dirname, _dbus_string_get_length (dirname));
<a name="l00753"></a>00753   <span class="keywordflow">else</span>
<a name="l00754"></a>00754     <span class="keywordflow">return</span> <a class="code" href="group__DBusString.html#gaf5f13bc7ac7a623516930d26ae2589bf" title="Like _dbus_string_copy(), but can copy a segment from the middle of the source string.">_dbus_string_copy_len</a> (filename, 0, sep - 0,
<a name="l00755"></a>00755                                   dirname, _dbus_string_get_length (dirname));
<a name="l00756"></a>00756 }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00766"></a>00766 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00767"></a><a class="code" href="group__DBusString.html#ga849177164bc5e73435104f57c631ed7e">00767</a> <a class="code" href="group__DBusInternalsUtils.html#ga849177164bc5e73435104f57c631ed7e" title="Checks to see if the UNIX user ID matches the UID of the process.">_dbus_unix_user_is_process_owner</a> (<a class="code" href="group__DBusSysdeps.html#ga186e987b700f9ddc6cea8aa0db82b151" title="A user ID.">dbus_uid_t</a> uid)
<a name="l00768"></a>00768 {
<a name="l00769"></a>00769   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 
<a name="l00772"></a><a class="code" href="group__DBusString.html#ga912d34a7e40b3a57864972e6d6ab65ba">00772</a> <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a> <a class="code" href="group__DBusInternalsUtils.html#ga912d34a7e40b3a57864972e6d6ab65ba" title="Checks to see if the Windows user SID matches the owner of the process.">_dbus_windows_user_is_process_owner</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *windows_sid)
<a name="l00773"></a>00773 {
<a name="l00774"></a>00774   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa8cecfc5c5c054d2875c03e77b7be15d" title="Expands to &quot;1&quot;.">TRUE</a>;
<a name="l00775"></a>00775 }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 <span class="comment">/*=====================================================================</span>
<a name="l00778"></a>00778 <span class="comment">  unix emulation functions - should be removed sometime in the future</span>
<a name="l00779"></a>00779 <span class="comment"> =====================================================================*/</span>
<a name="l00780"></a>00780 
<a name="l00790"></a>00790 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00791"></a><a class="code" href="group__DBusString.html#gaed2e025454364fbe31cd9b6538c9a936">00791</a> <a class="code" href="group__DBusInternalsUtils.html#gaed2e025454364fbe31cd9b6538c9a936" title="Checks to see if the UNIX user ID is at the console.">_dbus_unix_user_is_at_console</a> (<a class="code" href="group__DBusSysdeps.html#ga186e987b700f9ddc6cea8aa0db82b151" title="A user ID.">dbus_uid_t</a>         uid,
<a name="l00792"></a>00792                                <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>         *error)
<a name="l00793"></a>00793 {
<a name="l00794"></a>00794   <a class="code" href="group__DBusErrors.html#ga89d2ad4bde21f9e0057fac07a79885e3" title="Assigns an error name and message to a DBusError.">dbus_set_error</a> (error, <a class="code" href="group__DBusProtocol.html#ga33122bcaf8f5896ec222c755b6effb40" title="Requested operation isn&#39;t supported (like ENOSYS on UNIX).">DBUS_ERROR_NOT_SUPPORTED</a>,
<a name="l00795"></a>00795                   <span class="stringliteral">&quot;UNIX user IDs not supported on Windows\n&quot;</span>);
<a name="l00796"></a>00796   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00797"></a>00797 }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 
<a name="l00808"></a>00808 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00809"></a><a class="code" href="group__DBusString.html#ga96da816095ec7fec07136a6019745bcb">00809</a> <a class="code" href="group__DBusInternalsUtils.html#ga96da816095ec7fec07136a6019745bcb" title="Parse a UNIX group from the bus config file.">_dbus_parse_unix_group_from_config</a> (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a>  *groupname,
<a name="l00810"></a>00810                                     <a class="code" href="group__DBusSysdeps.html#ga2f5c2e418b81ec2a86594f56ec6d7627" title="A group ID.">dbus_gid_t</a>        *gid_p)
<a name="l00811"></a>00811 {
<a name="l00812"></a>00812   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00813"></a>00813 }
<a name="l00814"></a>00814 
<a name="l00823"></a>00823 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00824"></a><a class="code" href="group__DBusString.html#ga437470fc327b0169fc14a0b66a6e5278">00824</a> <a class="code" href="group__DBusInternalsUtils.html#ga437470fc327b0169fc14a0b66a6e5278" title="Parse a UNIX user from the bus config file.">_dbus_parse_unix_user_from_config</a> (<span class="keyword">const</span> <a class="code" href="structDBusString.html">DBusString</a>  *username,
<a name="l00825"></a>00825                                    <a class="code" href="group__DBusSysdeps.html#ga186e987b700f9ddc6cea8aa0db82b151" title="A user ID.">dbus_uid_t</a>        *uid_p)
<a name="l00826"></a>00826 {
<a name="l00827"></a>00827   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a>00830 
<a name="l00841"></a>00841 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l00842"></a><a class="code" href="group__DBusString.html#ga79647ec21c7edccd1510808ea0ca3779">00842</a> <a class="code" href="group__DBusInternalsUtils.html#ga79647ec21c7edccd1510808ea0ca3779" title="Gets all groups corresponding to the given UNIX user ID.">_dbus_unix_groups_from_uid</a> (<a class="code" href="group__DBusSysdeps.html#ga186e987b700f9ddc6cea8aa0db82b151" title="A user ID.">dbus_uid_t</a>            uid,
<a name="l00843"></a>00843                             <a class="code" href="group__DBusSysdeps.html#ga2f5c2e418b81ec2a86594f56ec6d7627" title="A group ID.">dbus_gid_t</a>          **group_ids,
<a name="l00844"></a>00844                             <span class="keywordtype">int</span>                  *n_group_ids)
<a name="l00845"></a>00845 {
<a name="l00846"></a>00846   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l00847"></a>00847 }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00850"></a>00850  <span class="comment">/* DBusString stuff */</span>
<a name="l00852"></a>00852 
<a name="l00853"></a>00853 <span class="comment">/************************************************************************</span>
<a name="l00854"></a>00854 <span class="comment"> </span>
<a name="l00855"></a>00855 <span class="comment"> error handling</span>
<a name="l00856"></a>00856 <span class="comment"> </span>
<a name="l00857"></a>00857 <span class="comment"> ************************************************************************/</span>
<a name="l00858"></a>00858 
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 
<a name="l00861"></a>00861 
<a name="l00862"></a>00862 
<a name="l00863"></a>00863 <span class="comment">/* lan manager error codes */</span>
<a name="l00864"></a>00864 <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l00865"></a>00865 _dbus_lm_strerror(<span class="keywordtype">int</span> error_number)
<a name="l00866"></a>00866 {
<a name="l00867"></a>00867 <span class="preprocessor">#ifdef DBUS_WINCE</span>
<a name="l00868"></a>00868 <span class="preprocessor"></span>  <span class="comment">// TODO</span>
<a name="l00869"></a>00869   <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;
<a name="l00870"></a>00870 <span class="preprocessor">#else</span>
<a name="l00871"></a>00871 <span class="preprocessor"></span>  <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;
<a name="l00872"></a>00872   <span class="keywordflow">switch</span> (error_number)
<a name="l00873"></a>00873     {
<a name="l00874"></a>00874     <span class="keywordflow">case</span> NERR_NetNotStarted:
<a name="l00875"></a>00875       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The workstation driver is not installed.&quot;</span>;
<a name="l00876"></a>00876     <span class="keywordflow">case</span> NERR_UnknownServer:
<a name="l00877"></a>00877       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server could not be located.&quot;</span>;
<a name="l00878"></a>00878     <span class="keywordflow">case</span> NERR_ShareMem:
<a name="l00879"></a>00879       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An internal error occurred. The network cannot access a shared memory segment.&quot;</span>;
<a name="l00880"></a>00880     <span class="keywordflow">case</span> NERR_NoNetworkResource:
<a name="l00881"></a>00881       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A network resource shortage occurred.&quot;</span>;
<a name="l00882"></a>00882     <span class="keywordflow">case</span> NERR_RemoteOnly:
<a name="l00883"></a>00883       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is not supported on workstations.&quot;</span>;
<a name="l00884"></a>00884     <span class="keywordflow">case</span> NERR_DevNotRedirected:
<a name="l00885"></a>00885       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The device is not connected.&quot;</span>;
<a name="l00886"></a>00886     <span class="keywordflow">case</span> NERR_ServerNotStarted:
<a name="l00887"></a>00887       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Server service is not started.&quot;</span>;
<a name="l00888"></a>00888     <span class="keywordflow">case</span> NERR_ItemNotFound:
<a name="l00889"></a>00889       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The queue is empty.&quot;</span>;
<a name="l00890"></a>00890     <span class="keywordflow">case</span> NERR_UnknownDevDir:
<a name="l00891"></a>00891       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The device or directory does not exist.&quot;</span>;
<a name="l00892"></a>00892     <span class="keywordflow">case</span> NERR_RedirectedPath:
<a name="l00893"></a>00893       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is invalid on a redirected resource.&quot;</span>;
<a name="l00894"></a>00894     <span class="keywordflow">case</span> NERR_DuplicateShare:
<a name="l00895"></a>00895       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The name has already been shared.&quot;</span>;
<a name="l00896"></a>00896     <span class="keywordflow">case</span> NERR_NoRoom:
<a name="l00897"></a>00897       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server is currently out of the requested resource.&quot;</span>;
<a name="l00898"></a>00898     <span class="keywordflow">case</span> NERR_TooManyItems:
<a name="l00899"></a>00899       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Requested addition of items exceeds the maximum allowed.&quot;</span>;
<a name="l00900"></a>00900     <span class="keywordflow">case</span> NERR_InvalidMaxUsers:
<a name="l00901"></a>00901       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Peer service supports only two simultaneous users.&quot;</span>;
<a name="l00902"></a>00902     <span class="keywordflow">case</span> NERR_BufTooSmall:
<a name="l00903"></a>00903       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The API return buffer is too small.&quot;</span>;
<a name="l00904"></a>00904     <span class="keywordflow">case</span> NERR_RemoteErr:
<a name="l00905"></a>00905       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A remote API error occurred.&quot;</span>;
<a name="l00906"></a>00906     <span class="keywordflow">case</span> NERR_LanmanIniError:
<a name="l00907"></a>00907       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred when opening or reading the configuration file.&quot;</span>;
<a name="l00908"></a>00908     <span class="keywordflow">case</span> NERR_NetworkError:
<a name="l00909"></a>00909       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A general network error occurred.&quot;</span>;
<a name="l00910"></a>00910     <span class="keywordflow">case</span> NERR_WkstaInconsistentState:
<a name="l00911"></a>00911       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Workstation service is in an inconsistent state. Restart the computer before restarting the Workstation service.&quot;</span>;
<a name="l00912"></a>00912     <span class="keywordflow">case</span> NERR_WkstaNotStarted:
<a name="l00913"></a>00913       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Workstation service has not been started.&quot;</span>;
<a name="l00914"></a>00914     <span class="keywordflow">case</span> NERR_BrowserNotStarted:
<a name="l00915"></a>00915       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The requested information is not available.&quot;</span>;
<a name="l00916"></a>00916     <span class="keywordflow">case</span> NERR_InternalError:
<a name="l00917"></a>00917       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An internal error occurred.&quot;</span>;
<a name="l00918"></a>00918     <span class="keywordflow">case</span> NERR_BadTransactConfig:
<a name="l00919"></a>00919       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server is not configured for transactions.&quot;</span>;
<a name="l00920"></a>00920     <span class="keywordflow">case</span> NERR_InvalidAPI:
<a name="l00921"></a>00921       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The requested API is not supported on the remote server.&quot;</span>;
<a name="l00922"></a>00922     <span class="keywordflow">case</span> NERR_BadEventName:
<a name="l00923"></a>00923       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The event name is invalid.&quot;</span>;
<a name="l00924"></a>00924     <span class="keywordflow">case</span> NERR_DupNameReboot:
<a name="l00925"></a>00925       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The computer name already exists on the network. Change it and restart the computer.&quot;</span>;
<a name="l00926"></a>00926     <span class="keywordflow">case</span> NERR_CfgCompNotFound:
<a name="l00927"></a>00927       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified component could not be found in the configuration information.&quot;</span>;
<a name="l00928"></a>00928     <span class="keywordflow">case</span> NERR_CfgParamNotFound:
<a name="l00929"></a>00929       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified parameter could not be found in the configuration information.&quot;</span>;
<a name="l00930"></a>00930     <span class="keywordflow">case</span> NERR_LineTooLong:
<a name="l00931"></a>00931       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A line in the configuration file is too long.&quot;</span>;
<a name="l00932"></a>00932     <span class="keywordflow">case</span> NERR_QNotFound:
<a name="l00933"></a>00933       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The printer does not exist.&quot;</span>;
<a name="l00934"></a>00934     <span class="keywordflow">case</span> NERR_JobNotFound:
<a name="l00935"></a>00935       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The print job does not exist.&quot;</span>;
<a name="l00936"></a>00936     <span class="keywordflow">case</span> NERR_DestNotFound:
<a name="l00937"></a>00937       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The printer destination cannot be found.&quot;</span>;
<a name="l00938"></a>00938     <span class="keywordflow">case</span> NERR_DestExists:
<a name="l00939"></a>00939       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The printer destination already exists.&quot;</span>;
<a name="l00940"></a>00940     <span class="keywordflow">case</span> NERR_QExists:
<a name="l00941"></a>00941       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The printer queue already exists.&quot;</span>;
<a name="l00942"></a>00942     <span class="keywordflow">case</span> NERR_QNoRoom:
<a name="l00943"></a>00943       <span class="keywordflow">return</span> <span class="stringliteral">&quot;No more printers can be added.&quot;</span>;
<a name="l00944"></a>00944     <span class="keywordflow">case</span> NERR_JobNoRoom:
<a name="l00945"></a>00945       <span class="keywordflow">return</span> <span class="stringliteral">&quot;No more print jobs can be added.&quot;</span>;
<a name="l00946"></a>00946     <span class="keywordflow">case</span> NERR_DestNoRoom:
<a name="l00947"></a>00947       <span class="keywordflow">return</span> <span class="stringliteral">&quot;No more printer destinations can be added.&quot;</span>;
<a name="l00948"></a>00948     <span class="keywordflow">case</span> NERR_DestIdle:
<a name="l00949"></a>00949       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This printer destination is idle and cannot accept control operations.&quot;</span>;
<a name="l00950"></a>00950     <span class="keywordflow">case</span> NERR_DestInvalidOp:
<a name="l00951"></a>00951       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This printer destination request contains an invalid control function.&quot;</span>;
<a name="l00952"></a>00952     <span class="keywordflow">case</span> NERR_ProcNoRespond:
<a name="l00953"></a>00953       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The print processor is not responding.&quot;</span>;
<a name="l00954"></a>00954     <span class="keywordflow">case</span> NERR_SpoolerNotLoaded:
<a name="l00955"></a>00955       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The spooler is not running.&quot;</span>;
<a name="l00956"></a>00956     <span class="keywordflow">case</span> NERR_DestInvalidState:
<a name="l00957"></a>00957       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation cannot be performed on the print destination in its current state.&quot;</span>;
<a name="l00958"></a>00958     <span class="keywordflow">case</span> NERR_QInvalidState:
<a name="l00959"></a>00959       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation cannot be performed on the printer queue in its current state.&quot;</span>;
<a name="l00960"></a>00960     <span class="keywordflow">case</span> NERR_JobInvalidState:
<a name="l00961"></a>00961       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation cannot be performed on the print job in its current state.&quot;</span>;
<a name="l00962"></a>00962     <span class="keywordflow">case</span> NERR_SpoolNoMemory:
<a name="l00963"></a>00963       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A spooler memory allocation failure occurred.&quot;</span>;
<a name="l00964"></a>00964     <span class="keywordflow">case</span> NERR_DriverNotFound:
<a name="l00965"></a>00965       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The device driver does not exist.&quot;</span>;
<a name="l00966"></a>00966     <span class="keywordflow">case</span> NERR_DataTypeInvalid:
<a name="l00967"></a>00967       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The data type is not supported by the print processor.&quot;</span>;
<a name="l00968"></a>00968     <span class="keywordflow">case</span> NERR_ProcNotFound:
<a name="l00969"></a>00969       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The print processor is not installed.&quot;</span>;
<a name="l00970"></a>00970     <span class="keywordflow">case</span> NERR_ServiceTableLocked:
<a name="l00971"></a>00971       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service database is locked.&quot;</span>;
<a name="l00972"></a>00972     <span class="keywordflow">case</span> NERR_ServiceTableFull:
<a name="l00973"></a>00973       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service table is full.&quot;</span>;
<a name="l00974"></a>00974     <span class="keywordflow">case</span> NERR_ServiceInstalled:
<a name="l00975"></a>00975       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The requested service has already been started.&quot;</span>;
<a name="l00976"></a>00976     <span class="keywordflow">case</span> NERR_ServiceEntryLocked:
<a name="l00977"></a>00977       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service does not respond to control actions.&quot;</span>;
<a name="l00978"></a>00978     <span class="keywordflow">case</span> NERR_ServiceNotInstalled:
<a name="l00979"></a>00979       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service has not been started.&quot;</span>;
<a name="l00980"></a>00980     <span class="keywordflow">case</span> NERR_BadServiceName:
<a name="l00981"></a>00981       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service name is invalid.&quot;</span>;
<a name="l00982"></a>00982     <span class="keywordflow">case</span> NERR_ServiceCtlTimeout:
<a name="l00983"></a>00983       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service is not responding to the control function.&quot;</span>;
<a name="l00984"></a>00984     <span class="keywordflow">case</span> NERR_ServiceCtlBusy:
<a name="l00985"></a>00985       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service control is busy.&quot;</span>;
<a name="l00986"></a>00986     <span class="keywordflow">case</span> NERR_BadServiceProgName:
<a name="l00987"></a>00987       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The configuration file contains an invalid service program name.&quot;</span>;
<a name="l00988"></a>00988     <span class="keywordflow">case</span> NERR_ServiceNotCtrl:
<a name="l00989"></a>00989       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service could not be controlled in its present state.&quot;</span>;
<a name="l00990"></a>00990     <span class="keywordflow">case</span> NERR_ServiceKillProc:
<a name="l00991"></a>00991       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service ended abnormally.&quot;</span>;
<a name="l00992"></a>00992     <span class="keywordflow">case</span> NERR_ServiceCtlNotValid:
<a name="l00993"></a>00993       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The requested pause or stop is not valid for this service.&quot;</span>;
<a name="l00994"></a>00994     <span class="keywordflow">case</span> NERR_NotInDispatchTbl:
<a name="l00995"></a>00995       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service control dispatcher could not find the service name in the dispatch table.&quot;</span>;
<a name="l00996"></a>00996     <span class="keywordflow">case</span> NERR_BadControlRecv:
<a name="l00997"></a>00997       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The service control dispatcher pipe read failed.&quot;</span>;
<a name="l00998"></a>00998     <span class="keywordflow">case</span> NERR_ServiceNotStarting:
<a name="l00999"></a>00999       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A thread for the new service could not be created.&quot;</span>;
<a name="l01000"></a>01000     <span class="keywordflow">case</span> NERR_AlreadyLoggedOn:
<a name="l01001"></a>01001       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This workstation is already logged on to the local-area network.&quot;</span>;
<a name="l01002"></a>01002     <span class="keywordflow">case</span> NERR_NotLoggedOn:
<a name="l01003"></a>01003       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The workstation is not logged on to the local-area network.&quot;</span>;
<a name="l01004"></a>01004     <span class="keywordflow">case</span> NERR_BadUsername:
<a name="l01005"></a>01005       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user name or group name parameter is invalid.&quot;</span>;
<a name="l01006"></a>01006     <span class="keywordflow">case</span> NERR_BadPassword:
<a name="l01007"></a>01007       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password parameter is invalid.&quot;</span>;
<a name="l01008"></a>01008     <span class="keywordflow">case</span> NERR_UnableToAddName_W:
<a name="l01009"></a>01009       <span class="keywordflow">return</span> <span class="stringliteral">&quot;@W The logon processor did not add the message alias.&quot;</span>;
<a name="l01010"></a>01010     <span class="keywordflow">case</span> NERR_UnableToAddName_F:
<a name="l01011"></a>01011       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The logon processor did not add the message alias.&quot;</span>;
<a name="l01012"></a>01012     <span class="keywordflow">case</span> NERR_UnableToDelName_W:
<a name="l01013"></a>01013       <span class="keywordflow">return</span> <span class="stringliteral">&quot;@W The logoff processor did not delete the message alias.&quot;</span>;
<a name="l01014"></a>01014     <span class="keywordflow">case</span> NERR_UnableToDelName_F:
<a name="l01015"></a>01015       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The logoff processor did not delete the message alias.&quot;</span>;
<a name="l01016"></a>01016     <span class="keywordflow">case</span> NERR_LogonsPaused:
<a name="l01017"></a>01017       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Network logons are paused.&quot;</span>;
<a name="l01018"></a>01018     <span class="keywordflow">case</span> NERR_LogonServerConflict:
<a name="l01019"></a>01019       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A centralized logon-server conflict occurred.&quot;</span>;
<a name="l01020"></a>01020     <span class="keywordflow">case</span> NERR_LogonNoUserPath:
<a name="l01021"></a>01021       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server is configured without a valid user path.&quot;</span>;
<a name="l01022"></a>01022     <span class="keywordflow">case</span> NERR_LogonScriptError:
<a name="l01023"></a>01023       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred while loading or running the logon script.&quot;</span>;
<a name="l01024"></a>01024     <span class="keywordflow">case</span> NERR_StandaloneLogon:
<a name="l01025"></a>01025       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The logon server was not specified. Your computer will be logged on as STANDALONE.&quot;</span>;
<a name="l01026"></a>01026     <span class="keywordflow">case</span> NERR_LogonServerNotFound:
<a name="l01027"></a>01027       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The logon server could not be found.&quot;</span>;
<a name="l01028"></a>01028     <span class="keywordflow">case</span> NERR_LogonDomainExists:
<a name="l01029"></a>01029       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There is already a logon domain for this computer.&quot;</span>;
<a name="l01030"></a>01030     <span class="keywordflow">case</span> NERR_NonValidatedLogon:
<a name="l01031"></a>01031       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The logon server could not validate the logon.&quot;</span>;
<a name="l01032"></a>01032     <span class="keywordflow">case</span> NERR_ACFNotFound:
<a name="l01033"></a>01033       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The security database could not be found.&quot;</span>;
<a name="l01034"></a>01034     <span class="keywordflow">case</span> NERR_GroupNotFound:
<a name="l01035"></a>01035       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The group name could not be found.&quot;</span>;
<a name="l01036"></a>01036     <span class="keywordflow">case</span> NERR_UserNotFound:
<a name="l01037"></a>01037       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user name could not be found.&quot;</span>;
<a name="l01038"></a>01038     <span class="keywordflow">case</span> NERR_ResourceNotFound:
<a name="l01039"></a>01039       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The resource name could not be found.&quot;</span>;
<a name="l01040"></a>01040     <span class="keywordflow">case</span> NERR_GroupExists:
<a name="l01041"></a>01041       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The group already exists.&quot;</span>;
<a name="l01042"></a>01042     <span class="keywordflow">case</span> NERR_UserExists:
<a name="l01043"></a>01043       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user account already exists.&quot;</span>;
<a name="l01044"></a>01044     <span class="keywordflow">case</span> NERR_ResourceExists:
<a name="l01045"></a>01045       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The resource permission list already exists.&quot;</span>;
<a name="l01046"></a>01046     <span class="keywordflow">case</span> NERR_NotPrimary:
<a name="l01047"></a>01047       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is only allowed on the primary domain controller of the domain.&quot;</span>;
<a name="l01048"></a>01048     <span class="keywordflow">case</span> NERR_ACFNotLoaded:
<a name="l01049"></a>01049       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The security database has not been started.&quot;</span>;
<a name="l01050"></a>01050     <span class="keywordflow">case</span> NERR_ACFNoRoom:
<a name="l01051"></a>01051       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are too many names in the user accounts database.&quot;</span>;
<a name="l01052"></a>01052     <span class="keywordflow">case</span> NERR_ACFFileIOFail:
<a name="l01053"></a>01053       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A disk I/O failure occurred.&quot;</span>;
<a name="l01054"></a>01054     <span class="keywordflow">case</span> NERR_ACFTooManyLists:
<a name="l01055"></a>01055       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The limit of 64 entries per resource was exceeded.&quot;</span>;
<a name="l01056"></a>01056     <span class="keywordflow">case</span> NERR_UserLogon:
<a name="l01057"></a>01057       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Deleting a user with a session is not allowed.&quot;</span>;
<a name="l01058"></a>01058     <span class="keywordflow">case</span> NERR_ACFNoParent:
<a name="l01059"></a>01059       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The parent directory could not be located.&quot;</span>;
<a name="l01060"></a>01060     <span class="keywordflow">case</span> NERR_CanNotGrowSegment:
<a name="l01061"></a>01061       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unable to add to the security database session cache segment.&quot;</span>;
<a name="l01062"></a>01062     <span class="keywordflow">case</span> NERR_SpeGroupOp:
<a name="l01063"></a>01063       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is not allowed on this special group.&quot;</span>;
<a name="l01064"></a>01064     <span class="keywordflow">case</span> NERR_NotInCache:
<a name="l01065"></a>01065       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This user is not cached in user accounts database session cache.&quot;</span>;
<a name="l01066"></a>01066     <span class="keywordflow">case</span> NERR_UserInGroup:
<a name="l01067"></a>01067       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user already belongs to this group.&quot;</span>;
<a name="l01068"></a>01068     <span class="keywordflow">case</span> NERR_UserNotInGroup:
<a name="l01069"></a>01069       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user does not belong to this group.&quot;</span>;
<a name="l01070"></a>01070     <span class="keywordflow">case</span> NERR_AccountUndefined:
<a name="l01071"></a>01071       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This user account is undefined.&quot;</span>;
<a name="l01072"></a>01072     <span class="keywordflow">case</span> NERR_AccountExpired:
<a name="l01073"></a>01073       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This user account has expired.&quot;</span>;
<a name="l01074"></a>01074     <span class="keywordflow">case</span> NERR_InvalidWorkstation:
<a name="l01075"></a>01075       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user is not allowed to log on from this workstation.&quot;</span>;
<a name="l01076"></a>01076     <span class="keywordflow">case</span> NERR_InvalidLogonHours:
<a name="l01077"></a>01077       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user is not allowed to log on at this time.&quot;</span>;
<a name="l01078"></a>01078     <span class="keywordflow">case</span> NERR_PasswordExpired:
<a name="l01079"></a>01079       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password of this user has expired.&quot;</span>;
<a name="l01080"></a>01080     <span class="keywordflow">case</span> NERR_PasswordCantChange:
<a name="l01081"></a>01081       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password of this user cannot change.&quot;</span>;
<a name="l01082"></a>01082     <span class="keywordflow">case</span> NERR_PasswordHistConflict:
<a name="l01083"></a>01083       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This password cannot be used now.&quot;</span>;
<a name="l01084"></a>01084     <span class="keywordflow">case</span> NERR_PasswordTooShort:
<a name="l01085"></a>01085       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.&quot;</span>;
<a name="l01086"></a>01086     <span class="keywordflow">case</span> NERR_PasswordTooRecent:
<a name="l01087"></a>01087       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password of this user is too recent to change.&quot;</span>;
<a name="l01088"></a>01088     <span class="keywordflow">case</span> NERR_InvalidDatabase:
<a name="l01089"></a>01089       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The security database is corrupted.&quot;</span>;
<a name="l01090"></a>01090     <span class="keywordflow">case</span> NERR_DatabaseUpToDate:
<a name="l01091"></a>01091       <span class="keywordflow">return</span> <span class="stringliteral">&quot;No updates are necessary to this replicant network/local security database.&quot;</span>;
<a name="l01092"></a>01092     <span class="keywordflow">case</span> NERR_SyncRequired:
<a name="l01093"></a>01093       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This replicant database is outdated; synchronization is required.&quot;</span>;
<a name="l01094"></a>01094     <span class="keywordflow">case</span> NERR_UseNotFound:
<a name="l01095"></a>01095       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The network connection could not be found.&quot;</span>;
<a name="l01096"></a>01096     <span class="keywordflow">case</span> NERR_BadAsgType:
<a name="l01097"></a>01097       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This asg_type is invalid.&quot;</span>;
<a name="l01098"></a>01098     <span class="keywordflow">case</span> NERR_DeviceIsShared:
<a name="l01099"></a>01099       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device is currently being shared.&quot;</span>;
<a name="l01100"></a>01100     <span class="keywordflow">case</span> NERR_NoComputerName:
<a name="l01101"></a>01101       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The computer name could not be added as a message alias. The name may already exist on the network.&quot;</span>;
<a name="l01102"></a>01102     <span class="keywordflow">case</span> NERR_MsgAlreadyStarted:
<a name="l01103"></a>01103       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Messenger service is already started.&quot;</span>;
<a name="l01104"></a>01104     <span class="keywordflow">case</span> NERR_MsgInitFailed:
<a name="l01105"></a>01105       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Messenger service failed to start.&quot;</span>;
<a name="l01106"></a>01106     <span class="keywordflow">case</span> NERR_NameNotFound:
<a name="l01107"></a>01107       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message alias could not be found on the network.&quot;</span>;
<a name="l01108"></a>01108     <span class="keywordflow">case</span> NERR_AlreadyForwarded:
<a name="l01109"></a>01109       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This message alias has already been forwarded.&quot;</span>;
<a name="l01110"></a>01110     <span class="keywordflow">case</span> NERR_AddForwarded:
<a name="l01111"></a>01111       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This message alias has been added but is still forwarded.&quot;</span>;
<a name="l01112"></a>01112     <span class="keywordflow">case</span> NERR_AlreadyExists:
<a name="l01113"></a>01113       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This message alias already exists locally.&quot;</span>;
<a name="l01114"></a>01114     <span class="keywordflow">case</span> NERR_TooManyNames:
<a name="l01115"></a>01115       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The maximum number of added message aliases has been exceeded.&quot;</span>;
<a name="l01116"></a>01116     <span class="keywordflow">case</span> NERR_DelComputerName:
<a name="l01117"></a>01117       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The computer name could not be deleted.&quot;</span>;
<a name="l01118"></a>01118     <span class="keywordflow">case</span> NERR_LocalForward:
<a name="l01119"></a>01119       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Messages cannot be forwarded back to the same workstation.&quot;</span>;
<a name="l01120"></a>01120     <span class="keywordflow">case</span> NERR_GrpMsgProcessor:
<a name="l01121"></a>01121       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred in the domain message processor.&quot;</span>;
<a name="l01122"></a>01122     <span class="keywordflow">case</span> NERR_PausedRemote:
<a name="l01123"></a>01123       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message was sent, but the recipient has paused the Messenger service.&quot;</span>;
<a name="l01124"></a>01124     <span class="keywordflow">case</span> NERR_BadReceive:
<a name="l01125"></a>01125       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message was sent but not received.&quot;</span>;
<a name="l01126"></a>01126     <span class="keywordflow">case</span> NERR_NameInUse:
<a name="l01127"></a>01127       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message alias is currently in use. Try again later.&quot;</span>;
<a name="l01128"></a>01128     <span class="keywordflow">case</span> NERR_MsgNotStarted:
<a name="l01129"></a>01129       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Messenger service has not been started.&quot;</span>;
<a name="l01130"></a>01130     <span class="keywordflow">case</span> NERR_NotLocalName:
<a name="l01131"></a>01131       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The name is not on the local computer.&quot;</span>;
<a name="l01132"></a>01132     <span class="keywordflow">case</span> NERR_NoForwardName:
<a name="l01133"></a>01133       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The forwarded message alias could not be found on the network.&quot;</span>;
<a name="l01134"></a>01134     <span class="keywordflow">case</span> NERR_RemoteFull:
<a name="l01135"></a>01135       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message alias table on the remote station is full.&quot;</span>;
<a name="l01136"></a>01136     <span class="keywordflow">case</span> NERR_NameNotForwarded:
<a name="l01137"></a>01137       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Messages for this alias are not currently being forwarded.&quot;</span>;
<a name="l01138"></a>01138     <span class="keywordflow">case</span> NERR_TruncatedBroadcast:
<a name="l01139"></a>01139       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The broadcast message was truncated.&quot;</span>;
<a name="l01140"></a>01140     <span class="keywordflow">case</span> NERR_InvalidDevice:
<a name="l01141"></a>01141       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This is an invalid device name.&quot;</span>;
<a name="l01142"></a>01142     <span class="keywordflow">case</span> NERR_WriteFault:
<a name="l01143"></a>01143       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A write fault occurred.&quot;</span>;
<a name="l01144"></a>01144     <span class="keywordflow">case</span> NERR_DuplicateName:
<a name="l01145"></a>01145       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A duplicate message alias exists on the network.&quot;</span>;
<a name="l01146"></a>01146     <span class="keywordflow">case</span> NERR_DeleteLater:
<a name="l01147"></a>01147       <span class="keywordflow">return</span> <span class="stringliteral">&quot;@W This message alias will be deleted later.&quot;</span>;
<a name="l01148"></a>01148     <span class="keywordflow">case</span> NERR_IncompleteDel:
<a name="l01149"></a>01149       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The message alias was not successfully deleted from all networks.&quot;</span>;
<a name="l01150"></a>01150     <span class="keywordflow">case</span> NERR_MultipleNets:
<a name="l01151"></a>01151       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is not supported on computers with multiple networks.&quot;</span>;
<a name="l01152"></a>01152     <span class="keywordflow">case</span> NERR_NetNameNotFound:
<a name="l01153"></a>01153       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This shared resource does not exist.&quot;</span>;
<a name="l01154"></a>01154     <span class="keywordflow">case</span> NERR_DeviceNotShared:
<a name="l01155"></a>01155       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device is not shared.&quot;</span>;
<a name="l01156"></a>01156     <span class="keywordflow">case</span> NERR_ClientNameNotFound:
<a name="l01157"></a>01157       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A session does not exist with that computer name.&quot;</span>;
<a name="l01158"></a>01158     <span class="keywordflow">case</span> NERR_FileIdNotFound:
<a name="l01159"></a>01159       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There is not an open file with that identification number.&quot;</span>;
<a name="l01160"></a>01160     <span class="keywordflow">case</span> NERR_ExecFailure:
<a name="l01161"></a>01161       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A failure occurred when executing a remote administration command.&quot;</span>;
<a name="l01162"></a>01162     <span class="keywordflow">case</span> NERR_TmpFile:
<a name="l01163"></a>01163       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A failure occurred when opening a remote temporary file.&quot;</span>;
<a name="l01164"></a>01164     <span class="keywordflow">case</span> NERR_TooMuchData:
<a name="l01165"></a>01165       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The data returned from a remote administration command has been truncated to 64K.&quot;</span>;
<a name="l01166"></a>01166     <span class="keywordflow">case</span> NERR_DeviceShareConflict:
<a name="l01167"></a>01167       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device cannot be shared as both a spooled and a non-spooled resource.&quot;</span>;
<a name="l01168"></a>01168     <span class="keywordflow">case</span> NERR_BrowserTableIncomplete:
<a name="l01169"></a>01169       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The information in the list of servers may be incorrect.&quot;</span>;
<a name="l01170"></a>01170     <span class="keywordflow">case</span> NERR_NotLocalDomain:
<a name="l01171"></a>01171       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The computer is not active in this domain.&quot;</span>;
<a name="l01172"></a>01172 <span class="preprocessor">#ifdef NERR_IsDfsShare</span>
<a name="l01173"></a>01173 <span class="preprocessor"></span>
<a name="l01174"></a>01174     <span class="keywordflow">case</span> NERR_IsDfsShare:
<a name="l01175"></a>01175       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The share must be removed from the Distributed File System before it can be deleted.&quot;</span>;
<a name="l01176"></a>01176 <span class="preprocessor">#endif</span>
<a name="l01177"></a>01177 <span class="preprocessor"></span>
<a name="l01178"></a>01178     <span class="keywordflow">case</span> NERR_DevInvalidOpCode:
<a name="l01179"></a>01179       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is invalid for this device.&quot;</span>;
<a name="l01180"></a>01180     <span class="keywordflow">case</span> NERR_DevNotFound:
<a name="l01181"></a>01181       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device cannot be shared.&quot;</span>;
<a name="l01182"></a>01182     <span class="keywordflow">case</span> NERR_DevNotOpen:
<a name="l01183"></a>01183       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device was not open.&quot;</span>;
<a name="l01184"></a>01184     <span class="keywordflow">case</span> NERR_BadQueueDevString:
<a name="l01185"></a>01185       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device name list is invalid.&quot;</span>;
<a name="l01186"></a>01186     <span class="keywordflow">case</span> NERR_BadQueuePriority:
<a name="l01187"></a>01187       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The queue priority is invalid.&quot;</span>;
<a name="l01188"></a>01188     <span class="keywordflow">case</span> NERR_NoCommDevs:
<a name="l01189"></a>01189       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are no shared communication devices.&quot;</span>;
<a name="l01190"></a>01190     <span class="keywordflow">case</span> NERR_QueueNotFound:
<a name="l01191"></a>01191       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The queue you specified does not exist.&quot;</span>;
<a name="l01192"></a>01192     <span class="keywordflow">case</span> NERR_BadDevString:
<a name="l01193"></a>01193       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This list of devices is invalid.&quot;</span>;
<a name="l01194"></a>01194     <span class="keywordflow">case</span> NERR_BadDev:
<a name="l01195"></a>01195       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The requested device is invalid.&quot;</span>;
<a name="l01196"></a>01196     <span class="keywordflow">case</span> NERR_InUseBySpooler:
<a name="l01197"></a>01197       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device is already in use by the spooler.&quot;</span>;
<a name="l01198"></a>01198     <span class="keywordflow">case</span> NERR_CommDevInUse:
<a name="l01199"></a>01199       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This device is already in use as a communication device.&quot;</span>;
<a name="l01200"></a>01200     <span class="keywordflow">case</span> NERR_InvalidComputer:
<a name="l01201"></a>01201       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This computer name is invalid.&quot;</span>;
<a name="l01202"></a>01202     <span class="keywordflow">case</span> NERR_MaxLenExceeded:
<a name="l01203"></a>01203       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The string and prefix specified are too long.&quot;</span>;
<a name="l01204"></a>01204     <span class="keywordflow">case</span> NERR_BadComponent:
<a name="l01205"></a>01205       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This path component is invalid.&quot;</span>;
<a name="l01206"></a>01206     <span class="keywordflow">case</span> NERR_CantType:
<a name="l01207"></a>01207       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Could not determine the type of input.&quot;</span>;
<a name="l01208"></a>01208     <span class="keywordflow">case</span> NERR_TooManyEntries:
<a name="l01209"></a>01209       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The buffer for types is not big enough.&quot;</span>;
<a name="l01210"></a>01210     <span class="keywordflow">case</span> NERR_ProfileFileTooBig:
<a name="l01211"></a>01211       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Profile files cannot exceed 64K.&quot;</span>;
<a name="l01212"></a>01212     <span class="keywordflow">case</span> NERR_ProfileOffset:
<a name="l01213"></a>01213       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The start offset is out of range.&quot;</span>;
<a name="l01214"></a>01214     <span class="keywordflow">case</span> NERR_ProfileCleanup:
<a name="l01215"></a>01215       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The system cannot delete current connections to network resources.&quot;</span>;
<a name="l01216"></a>01216     <span class="keywordflow">case</span> NERR_ProfileUnknownCmd:
<a name="l01217"></a>01217       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The system was unable to parse the command line in this file.&quot;</span>;
<a name="l01218"></a>01218     <span class="keywordflow">case</span> NERR_ProfileLoadErr:
<a name="l01219"></a>01219       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred while loading the profile file.&quot;</span>;
<a name="l01220"></a>01220     <span class="keywordflow">case</span> NERR_ProfileSaveErr:
<a name="l01221"></a>01221       <span class="keywordflow">return</span> <span class="stringliteral">&quot;@W Errors occurred while saving the profile file. The profile was partially saved.&quot;</span>;
<a name="l01222"></a>01222     <span class="keywordflow">case</span> NERR_LogOverflow:
<a name="l01223"></a>01223       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Log file %1 is full.&quot;</span>;
<a name="l01224"></a>01224     <span class="keywordflow">case</span> NERR_LogFileChanged:
<a name="l01225"></a>01225       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This log file has changed between reads.&quot;</span>;
<a name="l01226"></a>01226     <span class="keywordflow">case</span> NERR_LogFileCorrupt:
<a name="l01227"></a>01227       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Log file %1 is corrupt.&quot;</span>;
<a name="l01228"></a>01228     <span class="keywordflow">case</span> NERR_SourceIsDir:
<a name="l01229"></a>01229       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The source path cannot be a directory.&quot;</span>;
<a name="l01230"></a>01230     <span class="keywordflow">case</span> NERR_BadSource:
<a name="l01231"></a>01231       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The source path is illegal.&quot;</span>;
<a name="l01232"></a>01232     <span class="keywordflow">case</span> NERR_BadDest:
<a name="l01233"></a>01233       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The destination path is illegal.&quot;</span>;
<a name="l01234"></a>01234     <span class="keywordflow">case</span> NERR_DifferentServers:
<a name="l01235"></a>01235       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The source and destination paths are on different servers.&quot;</span>;
<a name="l01236"></a>01236     <span class="keywordflow">case</span> NERR_RunSrvPaused:
<a name="l01237"></a>01237       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Run server you requested is paused.&quot;</span>;
<a name="l01238"></a>01238     <span class="keywordflow">case</span> NERR_ErrCommRunSrv:
<a name="l01239"></a>01239       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred when communicating with a Run server.&quot;</span>;
<a name="l01240"></a>01240     <span class="keywordflow">case</span> NERR_ErrorExecingGhost:
<a name="l01241"></a>01241       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An error occurred when starting a background process.&quot;</span>;
<a name="l01242"></a>01242     <span class="keywordflow">case</span> NERR_ShareNotFound:
<a name="l01243"></a>01243       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The shared resource you are connected to could not be found.&quot;</span>;
<a name="l01244"></a>01244     <span class="keywordflow">case</span> NERR_InvalidLana:
<a name="l01245"></a>01245       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The LAN adapter number is invalid.&quot;</span>;
<a name="l01246"></a>01246     <span class="keywordflow">case</span> NERR_OpenFiles:
<a name="l01247"></a>01247       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are open files on the connection.&quot;</span>;
<a name="l01248"></a>01248     <span class="keywordflow">case</span> NERR_ActiveConns:
<a name="l01249"></a>01249       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Active connections still exist.&quot;</span>;
<a name="l01250"></a>01250     <span class="keywordflow">case</span> NERR_BadPasswordCore:
<a name="l01251"></a>01251       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This share name or password is invalid.&quot;</span>;
<a name="l01252"></a>01252     <span class="keywordflow">case</span> NERR_DevInUse:
<a name="l01253"></a>01253       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The device is being accessed by an active process.&quot;</span>;
<a name="l01254"></a>01254     <span class="keywordflow">case</span> NERR_LocalDrive:
<a name="l01255"></a>01255       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The drive letter is in use locally.&quot;</span>;
<a name="l01256"></a>01256     <span class="keywordflow">case</span> NERR_AlertExists:
<a name="l01257"></a>01257       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified client is already registered for the specified event.&quot;</span>;
<a name="l01258"></a>01258     <span class="keywordflow">case</span> NERR_TooManyAlerts:
<a name="l01259"></a>01259       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The alert table is full.&quot;</span>;
<a name="l01260"></a>01260     <span class="keywordflow">case</span> NERR_NoSuchAlert:
<a name="l01261"></a>01261       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An invalid or nonexistent alert name was raised.&quot;</span>;
<a name="l01262"></a>01262     <span class="keywordflow">case</span> NERR_BadRecipient:
<a name="l01263"></a>01263       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The alert recipient is invalid.&quot;</span>;
<a name="l01264"></a>01264     <span class="keywordflow">case</span> NERR_AcctLimitExceeded:
<a name="l01265"></a>01265       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A user&#39;s session with this server has been deleted.&quot;</span>;
<a name="l01266"></a>01266     <span class="keywordflow">case</span> NERR_InvalidLogSeek:
<a name="l01267"></a>01267       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The log file does not contain the requested record number.&quot;</span>;
<a name="l01268"></a>01268     <span class="keywordflow">case</span> NERR_BadUasConfig:
<a name="l01269"></a>01269       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user accounts database is not configured correctly.&quot;</span>;
<a name="l01270"></a>01270     <span class="keywordflow">case</span> NERR_InvalidUASOp:
<a name="l01271"></a>01271       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is not permitted when the Netlogon service is running.&quot;</span>;
<a name="l01272"></a>01272     <span class="keywordflow">case</span> NERR_LastAdmin:
<a name="l01273"></a>01273       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This operation is not allowed on the last administrative account.&quot;</span>;
<a name="l01274"></a>01274     <span class="keywordflow">case</span> NERR_DCNotFound:
<a name="l01275"></a>01275       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Could not find domain controller for this domain.&quot;</span>;
<a name="l01276"></a>01276     <span class="keywordflow">case</span> NERR_LogonTrackingError:
<a name="l01277"></a>01277       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Could not set logon information for this user.&quot;</span>;
<a name="l01278"></a>01278     <span class="keywordflow">case</span> NERR_NetlogonNotStarted:
<a name="l01279"></a>01279       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Netlogon service has not been started.&quot;</span>;
<a name="l01280"></a>01280     <span class="keywordflow">case</span> NERR_CanNotGrowUASFile:
<a name="l01281"></a>01281       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unable to add to the user accounts database.&quot;</span>;
<a name="l01282"></a>01282     <span class="keywordflow">case</span> NERR_TimeDiffAtDC:
<a name="l01283"></a>01283       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This server&#39;s clock is not synchronized with the primary domain controller&#39;s clock.&quot;</span>;
<a name="l01284"></a>01284     <span class="keywordflow">case</span> NERR_PasswordMismatch:
<a name="l01285"></a>01285       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A password mismatch has been detected.&quot;</span>;
<a name="l01286"></a>01286     <span class="keywordflow">case</span> NERR_NoSuchServer:
<a name="l01287"></a>01287       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server identification does not specify a valid server.&quot;</span>;
<a name="l01288"></a>01288     <span class="keywordflow">case</span> NERR_NoSuchSession:
<a name="l01289"></a>01289       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The session identification does not specify a valid session.&quot;</span>;
<a name="l01290"></a>01290     <span class="keywordflow">case</span> NERR_NoSuchConnection:
<a name="l01291"></a>01291       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The connection identification does not specify a valid connection.&quot;</span>;
<a name="l01292"></a>01292     <span class="keywordflow">case</span> NERR_TooManyServers:
<a name="l01293"></a>01293       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There is no space for another entry in the table of available servers.&quot;</span>;
<a name="l01294"></a>01294     <span class="keywordflow">case</span> NERR_TooManySessions:
<a name="l01295"></a>01295       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server has reached the maximum number of sessions it supports.&quot;</span>;
<a name="l01296"></a>01296     <span class="keywordflow">case</span> NERR_TooManyConnections:
<a name="l01297"></a>01297       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server has reached the maximum number of connections it supports.&quot;</span>;
<a name="l01298"></a>01298     <span class="keywordflow">case</span> NERR_TooManyFiles:
<a name="l01299"></a>01299       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server cannot open more files because it has reached its maximum number.&quot;</span>;
<a name="l01300"></a>01300     <span class="keywordflow">case</span> NERR_NoAlternateServers:
<a name="l01301"></a>01301       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are no alternate servers registered on this server.&quot;</span>;
<a name="l01302"></a>01302     <span class="keywordflow">case</span> NERR_TryDownLevel:
<a name="l01303"></a>01303       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Try down-level (remote admin protocol) version of API instead.&quot;</span>;
<a name="l01304"></a>01304     <span class="keywordflow">case</span> NERR_UPSDriverNotStarted:
<a name="l01305"></a>01305       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The UPS driver could not be accessed by the UPS service.&quot;</span>;
<a name="l01306"></a>01306     <span class="keywordflow">case</span> NERR_UPSInvalidConfig:
<a name="l01307"></a>01307       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The UPS service is not configured correctly.&quot;</span>;
<a name="l01308"></a>01308     <span class="keywordflow">case</span> NERR_UPSInvalidCommPort:
<a name="l01309"></a>01309       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The UPS service could not access the specified Comm Port.&quot;</span>;
<a name="l01310"></a>01310     <span class="keywordflow">case</span> NERR_UPSSignalAsserted:
<a name="l01311"></a>01311       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The UPS indicated a line fail or low battery situation. Service not started.&quot;</span>;
<a name="l01312"></a>01312     <span class="keywordflow">case</span> NERR_UPSShutdownFailed:
<a name="l01313"></a>01313       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The UPS service failed to perform a system shut down.&quot;</span>;
<a name="l01314"></a>01314     <span class="keywordflow">case</span> NERR_BadDosRetCode:
<a name="l01315"></a>01315       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The program below returned an MS-DOS error code:&quot;</span>;
<a name="l01316"></a>01316     <span class="keywordflow">case</span> NERR_ProgNeedsExtraMem:
<a name="l01317"></a>01317       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The program below needs more memory:&quot;</span>;
<a name="l01318"></a>01318     <span class="keywordflow">case</span> NERR_BadDosFunction:
<a name="l01319"></a>01319       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The program below called an unsupported MS-DOS function:&quot;</span>;
<a name="l01320"></a>01320     <span class="keywordflow">case</span> NERR_RemoteBootFailed:
<a name="l01321"></a>01321       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The workstation failed to boot.&quot;</span>;
<a name="l01322"></a>01322     <span class="keywordflow">case</span> NERR_BadFileCheckSum:
<a name="l01323"></a>01323       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The file below is corrupt.&quot;</span>;
<a name="l01324"></a>01324     <span class="keywordflow">case</span> NERR_NoRplBootSystem:
<a name="l01325"></a>01325       <span class="keywordflow">return</span> <span class="stringliteral">&quot;No loader is specified in the boot-block definition file.&quot;</span>;
<a name="l01326"></a>01326     <span class="keywordflow">case</span> NERR_RplLoadrNetBiosErr:
<a name="l01327"></a>01327       <span class="keywordflow">return</span> <span class="stringliteral">&quot;NetBIOS returned an error:      The NCB and SMB are dumped above.&quot;</span>;
<a name="l01328"></a>01328     <span class="keywordflow">case</span> NERR_RplLoadrDiskErr:
<a name="l01329"></a>01329       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A disk I/O error occurred.&quot;</span>;
<a name="l01330"></a>01330     <span class="keywordflow">case</span> NERR_ImageParamErr:
<a name="l01331"></a>01331       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Image parameter substitution failed.&quot;</span>;
<a name="l01332"></a>01332     <span class="keywordflow">case</span> NERR_TooManyImageParams:
<a name="l01333"></a>01333       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Too many image parameters cross disk sector boundaries.&quot;</span>;
<a name="l01334"></a>01334     <span class="keywordflow">case</span> NERR_NonDosFloppyUsed:
<a name="l01335"></a>01335       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The image was not generated from an MS-DOS diskette formatted with /S.&quot;</span>;
<a name="l01336"></a>01336     <span class="keywordflow">case</span> NERR_RplBootRestart:
<a name="l01337"></a>01337       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote boot will be restarted later.&quot;</span>;
<a name="l01338"></a>01338     <span class="keywordflow">case</span> NERR_RplSrvrCallFailed:
<a name="l01339"></a>01339       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The call to the Remoteboot server failed.&quot;</span>;
<a name="l01340"></a>01340     <span class="keywordflow">case</span> NERR_CantConnectRplSrvr:
<a name="l01341"></a>01341       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cannot connect to the Remoteboot server.&quot;</span>;
<a name="l01342"></a>01342     <span class="keywordflow">case</span> NERR_CantOpenImageFile:
<a name="l01343"></a>01343       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cannot open image file on the Remoteboot server.&quot;</span>;
<a name="l01344"></a>01344     <span class="keywordflow">case</span> NERR_CallingRplSrvr:
<a name="l01345"></a>01345       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Connecting to the Remoteboot server...&quot;</span>;
<a name="l01346"></a>01346     <span class="keywordflow">case</span> NERR_StartingRplBoot:
<a name="l01347"></a>01347       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Connecting to the Remoteboot server...&quot;</span>;
<a name="l01348"></a>01348     <span class="keywordflow">case</span> NERR_RplBootServiceTerm:
<a name="l01349"></a>01349       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote boot service was stopped; check the error log for the cause of the problem.&quot;</span>;
<a name="l01350"></a>01350     <span class="keywordflow">case</span> NERR_RplBootStartFailed:
<a name="l01351"></a>01351       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote boot startup failed; check the error log for the cause of the problem.&quot;</span>;
<a name="l01352"></a>01352     <span class="keywordflow">case</span> NERR_RPL_CONNECTED:
<a name="l01353"></a>01353       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A second connection to a Remoteboot resource is not allowed.&quot;</span>;
<a name="l01354"></a>01354     <span class="keywordflow">case</span> NERR_BrowserConfiguredToNotRun:
<a name="l01355"></a>01355       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The browser service was configured with MaintainServerList=No.&quot;</span>;
<a name="l01356"></a>01356     <span class="keywordflow">case</span> NERR_RplNoAdaptersStarted:
<a name="l01357"></a>01357       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to start since none of the network adapters started with this service.&quot;</span>;
<a name="l01358"></a>01358     <span class="keywordflow">case</span> NERR_RplBadRegistry:
<a name="l01359"></a>01359       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to start due to bad startup information in the registry.&quot;</span>;
<a name="l01360"></a>01360     <span class="keywordflow">case</span> NERR_RplBadDatabase:
<a name="l01361"></a>01361       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to start because its database is absent or corrupt.&quot;</span>;
<a name="l01362"></a>01362     <span class="keywordflow">case</span> NERR_RplRplfilesShare:
<a name="l01363"></a>01363       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to start because RPLFILES share is absent.&quot;</span>;
<a name="l01364"></a>01364     <span class="keywordflow">case</span> NERR_RplNotRplServer:
<a name="l01365"></a>01365       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to start because RPLUSER group is absent.&quot;</span>;
<a name="l01366"></a>01366     <span class="keywordflow">case</span> NERR_RplCannotEnum:
<a name="l01367"></a>01367       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cannot enumerate service records.&quot;</span>;
<a name="l01368"></a>01368     <span class="keywordflow">case</span> NERR_RplWkstaInfoCorrupted:
<a name="l01369"></a>01369       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Workstation record information has been corrupted.&quot;</span>;
<a name="l01370"></a>01370     <span class="keywordflow">case</span> NERR_RplWkstaNotFound:
<a name="l01371"></a>01371       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Workstation record was not found.&quot;</span>;
<a name="l01372"></a>01372     <span class="keywordflow">case</span> NERR_RplWkstaNameUnavailable:
<a name="l01373"></a>01373       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Workstation name is in use by some other workstation.&quot;</span>;
<a name="l01374"></a>01374     <span class="keywordflow">case</span> NERR_RplProfileInfoCorrupted:
<a name="l01375"></a>01375       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Profile record information has been corrupted.&quot;</span>;
<a name="l01376"></a>01376     <span class="keywordflow">case</span> NERR_RplProfileNotFound:
<a name="l01377"></a>01377       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Profile record was not found.&quot;</span>;
<a name="l01378"></a>01378     <span class="keywordflow">case</span> NERR_RplProfileNameUnavailable:
<a name="l01379"></a>01379       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Profile name is in use by some other profile.&quot;</span>;
<a name="l01380"></a>01380     <span class="keywordflow">case</span> NERR_RplProfileNotEmpty:
<a name="l01381"></a>01381       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are workstations using this profile.&quot;</span>;
<a name="l01382"></a>01382     <span class="keywordflow">case</span> NERR_RplConfigInfoCorrupted:
<a name="l01383"></a>01383       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Configuration record information has been corrupted.&quot;</span>;
<a name="l01384"></a>01384     <span class="keywordflow">case</span> NERR_RplConfigNotFound:
<a name="l01385"></a>01385       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Configuration record was not found.&quot;</span>;
<a name="l01386"></a>01386     <span class="keywordflow">case</span> NERR_RplAdapterInfoCorrupted:
<a name="l01387"></a>01387       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Adapter ID record information has been corrupted.&quot;</span>;
<a name="l01388"></a>01388     <span class="keywordflow">case</span> NERR_RplInternal:
<a name="l01389"></a>01389       <span class="keywordflow">return</span> <span class="stringliteral">&quot;An internal service error has occurred.&quot;</span>;
<a name="l01390"></a>01390     <span class="keywordflow">case</span> NERR_RplVendorInfoCorrupted:
<a name="l01391"></a>01391       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Vendor ID record information has been corrupted.&quot;</span>;
<a name="l01392"></a>01392     <span class="keywordflow">case</span> NERR_RplBootInfoCorrupted:
<a name="l01393"></a>01393       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Boot block record information has been corrupted.&quot;</span>;
<a name="l01394"></a>01394     <span class="keywordflow">case</span> NERR_RplWkstaNeedsUserAcct:
<a name="l01395"></a>01395       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The user account for this workstation record is missing.&quot;</span>;
<a name="l01396"></a>01396     <span class="keywordflow">case</span> NERR_RplNeedsRPLUSERAcct:
<a name="l01397"></a>01397       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The RPLUSER local group could not be found.&quot;</span>;
<a name="l01398"></a>01398     <span class="keywordflow">case</span> NERR_RplBootNotFound:
<a name="l01399"></a>01399       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Boot block record was not found.&quot;</span>;
<a name="l01400"></a>01400     <span class="keywordflow">case</span> NERR_RplIncompatibleProfile:
<a name="l01401"></a>01401       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Chosen profile is incompatible with this workstation.&quot;</span>;
<a name="l01402"></a>01402     <span class="keywordflow">case</span> NERR_RplAdapterNameUnavailable:
<a name="l01403"></a>01403       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Chosen network adapter ID is in use by some other workstation.&quot;</span>;
<a name="l01404"></a>01404     <span class="keywordflow">case</span> NERR_RplConfigNotEmpty:
<a name="l01405"></a>01405       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are profiles using this configuration.&quot;</span>;
<a name="l01406"></a>01406     <span class="keywordflow">case</span> NERR_RplBootInUse:
<a name="l01407"></a>01407       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There are workstations, profiles, or configurations using this boot block.&quot;</span>;
<a name="l01408"></a>01408     <span class="keywordflow">case</span> NERR_RplBackupDatabase:
<a name="l01409"></a>01409       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Service failed to backup Remoteboot database.&quot;</span>;
<a name="l01410"></a>01410     <span class="keywordflow">case</span> NERR_RplAdapterNotFound:
<a name="l01411"></a>01411       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Adapter record was not found.&quot;</span>;
<a name="l01412"></a>01412     <span class="keywordflow">case</span> NERR_RplVendorNotFound:
<a name="l01413"></a>01413       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Vendor record was not found.&quot;</span>;
<a name="l01414"></a>01414     <span class="keywordflow">case</span> NERR_RplVendorNameUnavailable:
<a name="l01415"></a>01415       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Vendor name is in use by some other vendor record.&quot;</span>;
<a name="l01416"></a>01416     <span class="keywordflow">case</span> NERR_RplBootNameUnavailable:
<a name="l01417"></a>01417       <span class="keywordflow">return</span> <span class="stringliteral">&quot;(boot name, vendor ID) is in use by some other boot block record.&quot;</span>;
<a name="l01418"></a>01418     <span class="keywordflow">case</span> NERR_RplConfigNameUnavailable:
<a name="l01419"></a>01419       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Configuration name is in use by some other configuration.&quot;</span>;
<a name="l01420"></a>01420     <span class="keywordflow">case</span> NERR_DfsInternalCorruption:
<a name="l01421"></a>01421       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The internal database maintained by the Dfs service is corrupt.&quot;</span>;
<a name="l01422"></a>01422     <span class="keywordflow">case</span> NERR_DfsVolumeDataCorrupt:
<a name="l01423"></a>01423       <span class="keywordflow">return</span> <span class="stringliteral">&quot;One of the records in the internal Dfs database is corrupt.&quot;</span>;
<a name="l01424"></a>01424     <span class="keywordflow">case</span> NERR_DfsNoSuchVolume:
<a name="l01425"></a>01425       <span class="keywordflow">return</span> <span class="stringliteral">&quot;There is no DFS name whose entry path matches the input Entry Path.&quot;</span>;
<a name="l01426"></a>01426     <span class="keywordflow">case</span> NERR_DfsVolumeAlreadyExists:
<a name="l01427"></a>01427       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A root or link with the given name already exists.&quot;</span>;
<a name="l01428"></a>01428     <span class="keywordflow">case</span> NERR_DfsAlreadyShared:
<a name="l01429"></a>01429       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server share specified is already shared in the Dfs.&quot;</span>;
<a name="l01430"></a>01430     <span class="keywordflow">case</span> NERR_DfsNoSuchShare:
<a name="l01431"></a>01431       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The indicated server share does not support the indicated DFS namespace.&quot;</span>;
<a name="l01432"></a>01432     <span class="keywordflow">case</span> NERR_DfsNotALeafVolume:
<a name="l01433"></a>01433       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is not valid on this portion of the namespace.&quot;</span>;
<a name="l01434"></a>01434     <span class="keywordflow">case</span> NERR_DfsLeafVolume:
<a name="l01435"></a>01435       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is not valid on this portion of the namespace.&quot;</span>;
<a name="l01436"></a>01436     <span class="keywordflow">case</span> NERR_DfsVolumeHasMultipleServers:
<a name="l01437"></a>01437       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is ambiguous because the link has multiple servers.&quot;</span>;
<a name="l01438"></a>01438     <span class="keywordflow">case</span> NERR_DfsCantCreateJunctionPoint:
<a name="l01439"></a>01439       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unable to create a link.&quot;</span>;
<a name="l01440"></a>01440     <span class="keywordflow">case</span> NERR_DfsServerNotDfsAware:
<a name="l01441"></a>01441       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The server is not Dfs Aware.&quot;</span>;
<a name="l01442"></a>01442     <span class="keywordflow">case</span> NERR_DfsBadRenamePath:
<a name="l01443"></a>01443       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified rename target path is invalid.&quot;</span>;
<a name="l01444"></a>01444     <span class="keywordflow">case</span> NERR_DfsVolumeIsOffline:
<a name="l01445"></a>01445       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified DFS link is offline.&quot;</span>;
<a name="l01446"></a>01446     <span class="keywordflow">case</span> NERR_DfsNoSuchServer:
<a name="l01447"></a>01447       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified server is not a server for this link.&quot;</span>;
<a name="l01448"></a>01448     <span class="keywordflow">case</span> NERR_DfsCyclicalName:
<a name="l01449"></a>01449       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A cycle in the Dfs name was detected.&quot;</span>;
<a name="l01450"></a>01450     <span class="keywordflow">case</span> NERR_DfsNotSupportedInServerDfs:
<a name="l01451"></a>01451       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is not supported on a server-based Dfs.&quot;</span>;
<a name="l01452"></a>01452     <span class="keywordflow">case</span> NERR_DfsDuplicateService:
<a name="l01453"></a>01453       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This link is already supported by the specified server-share.&quot;</span>;
<a name="l01454"></a>01454     <span class="keywordflow">case</span> NERR_DfsCantRemoveLastServerShare:
<a name="l01455"></a>01455       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Can&#39;t remove the last server-share supporting this root or link.&quot;</span>;
<a name="l01456"></a>01456     <span class="keywordflow">case</span> NERR_DfsVolumeIsInterDfs:
<a name="l01457"></a>01457       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The operation is not supported for an Inter-DFS link.&quot;</span>;
<a name="l01458"></a>01458     <span class="keywordflow">case</span> NERR_DfsInconsistent:
<a name="l01459"></a>01459       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The internal state of the Dfs Service has become inconsistent.&quot;</span>;
<a name="l01460"></a>01460     <span class="keywordflow">case</span> NERR_DfsServerUpgraded:
<a name="l01461"></a>01461       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Dfs Service has been installed on the specified server.&quot;</span>;
<a name="l01462"></a>01462     <span class="keywordflow">case</span> NERR_DfsDataIsIdentical:
<a name="l01463"></a>01463       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The Dfs data being reconciled is identical.&quot;</span>;
<a name="l01464"></a>01464     <span class="keywordflow">case</span> NERR_DfsCantRemoveDfsRoot:
<a name="l01465"></a>01465       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The DFS root cannot be deleted. Uninstall DFS if required.&quot;</span>;
<a name="l01466"></a>01466     <span class="keywordflow">case</span> NERR_DfsChildOrParentInDfs:
<a name="l01467"></a>01467       <span class="keywordflow">return</span> <span class="stringliteral">&quot;A child or parent directory of the share is already in a Dfs.&quot;</span>;
<a name="l01468"></a>01468     <span class="keywordflow">case</span> NERR_DfsInternalError:
<a name="l01469"></a>01469       <span class="keywordflow">return</span> <span class="stringliteral">&quot;Dfs internal error.&quot;</span>;
<a name="l01470"></a>01470       <span class="comment">/* the following are not defined in mingw */</span>
<a name="l01471"></a>01471 <span class="preprocessor">#if 0</span>
<a name="l01472"></a>01472 <span class="preprocessor"></span>
<a name="l01473"></a>01473     <span class="keywordflow">case</span> NERR_SetupAlreadyJoined:
<a name="l01474"></a>01474       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This machine is already joined to a domain.&quot;</span>;
<a name="l01475"></a>01475     <span class="keywordflow">case</span> NERR_SetupNotJoined:
<a name="l01476"></a>01476       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This machine is not currently joined to a domain.&quot;</span>;
<a name="l01477"></a>01477     <span class="keywordflow">case</span> NERR_SetupDomainController:
<a name="l01478"></a>01478       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This machine is a domain controller and cannot be unjoined from a domain.&quot;</span>;
<a name="l01479"></a>01479     <span class="keywordflow">case</span> NERR_DefaultJoinRequired:
<a name="l01480"></a>01480       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The destination domain controller does not support creating machine accounts in OUs.&quot;</span>;
<a name="l01481"></a>01481     <span class="keywordflow">case</span> NERR_InvalidWorkgroupName:
<a name="l01482"></a>01482       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified workgroup name is invalid.&quot;</span>;
<a name="l01483"></a>01483     <span class="keywordflow">case</span> NERR_NameUsesIncompatibleCodePage:
<a name="l01484"></a>01484       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified computer name is incompatible with the default language used on the domain controller.&quot;</span>;
<a name="l01485"></a>01485     <span class="keywordflow">case</span> NERR_ComputerAccountNotFound:
<a name="l01486"></a>01486       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The specified computer account could not be found.&quot;</span>;
<a name="l01487"></a>01487     <span class="keywordflow">case</span> NERR_PersonalSku:
<a name="l01488"></a>01488       <span class="keywordflow">return</span> <span class="stringliteral">&quot;This version of Windows cannot be joined to a domain.&quot;</span>;
<a name="l01489"></a>01489     <span class="keywordflow">case</span> NERR_PasswordMustChange:
<a name="l01490"></a>01490       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password must change at the next logon.&quot;</span>;
<a name="l01491"></a>01491     <span class="keywordflow">case</span> NERR_AccountLockedOut:
<a name="l01492"></a>01492       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The account is locked out.&quot;</span>;
<a name="l01493"></a>01493     <span class="keywordflow">case</span> NERR_PasswordTooLong:
<a name="l01494"></a>01494       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password is too long.&quot;</span>;
<a name="l01495"></a>01495     <span class="keywordflow">case</span> NERR_PasswordNotComplexEnough:
<a name="l01496"></a>01496       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password does not meet the complexity policy.&quot;</span>;
<a name="l01497"></a>01497     <span class="keywordflow">case</span> NERR_PasswordFilterError:
<a name="l01498"></a>01498       <span class="keywordflow">return</span> <span class="stringliteral">&quot;The password does not meet the requirements of the password filter DLLs.&quot;</span>;
<a name="l01499"></a>01499 <span class="preprocessor">#endif</span>
<a name="l01500"></a>01500 <span class="preprocessor"></span>
<a name="l01501"></a>01501     }
<a name="l01502"></a>01502   msg = strerror (error_number);
<a name="l01503"></a>01503   <span class="keywordflow">if</span> (msg == <a class="code" href="group__DBusMacros.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4" title="A null pointer, defined appropriately for C or C++.">NULL</a>)
<a name="l01504"></a>01504     msg = <span class="stringliteral">&quot;unknown&quot;</span>;
<a name="l01505"></a>01505 
<a name="l01506"></a>01506   <span class="keywordflow">return</span> msg;
<a name="l01507"></a>01507 <span class="preprocessor">#endif //DBUS_WINCE</span>
<a name="l01508"></a>01508 <span class="preprocessor"></span>}
<a name="l01509"></a>01509 
<a name="l01524"></a>01524 <a class="code" href="group__DBusTypes.html#ga39c9cb0f3a2a8ad6f55cc4855d035349" title="A boolean, valid values are TRUE and FALSE.">dbus_bool_t</a>
<a name="l01525"></a><a class="code" href="group__DBusSysdeps.html#ga3551d425aba3d92e652b8809fdfe9339">01525</a> <a class="code" href="group__DBusSysdeps.html#ga3551d425aba3d92e652b8809fdfe9339" title="Get a printable string describing the command used to execute the process with pid.">_dbus_command_for_pid</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>  pid,
<a name="l01526"></a>01526                        <a class="code" href="structDBusString.html">DBusString</a>    *str,
<a name="l01527"></a>01527                        <span class="keywordtype">int</span>            max_len,
<a name="l01528"></a>01528                        <a class="code" href="structDBusError.html" title="Object representing an exception.">DBusError</a>     *error)
<a name="l01529"></a>01529 {
<a name="l01530"></a>01530   <span class="comment">// FIXME</span>
<a name="l01531"></a>01531   <span class="keywordflow">return</span> <a class="code" href="group__DBusMacros.html#gaa93f0eb578d23995850d61f7d61c55c1" title="Expands to &quot;0&quot;.">FALSE</a>;
<a name="l01532"></a>01532 }
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 21 2012 17:59:19 for D-Bus by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
